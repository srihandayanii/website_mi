(function(a){if(typeof exports=="object"&&typeof module=="object"){a(require("../../lib/codemirror"))}else{if(typeof define=="function"&&define.amd){define(["../../lib/codemirror"],a)}else{a(CodeMirror)}}})(function(b){function a(e,g,h){this.orientation=g;this.scroll=h;this.screen=this.total=this.size=1;this.pos=0;this.node=document.createElement("div");this.node.className=e+"-"+g;this.inner=this.node.appendChild(document.createElement("div"));var i=this;b.on(this.inner,"mousedown",function(l){if(l.which!=1){return}b.e_preventDefault(l);var j=i.orientation=="horizontal"?"pageX":"pageY";var n=l[j],o=i.pos;function k(){b.off(document,"mousemove",m);b.off(document,"mouseup",k)}function m(p){if(p.which!=1){return k()}i.moveTo(o+(p[j]-n)*(i.total/i.size))}b.on(document,"mousemove",m);b.on(document,"mouseup",k)});b.on(this.node,"click",function(j){b.e_preventDefault(j);var k=i.inner.getBoundingClientRect(),l;if(i.orientation=="horizontal"){l=j.clientX<k.left?-1:j.clientX>k.right?1:0}else{l=j.clientY<k.top?-1:j.clientY>k.bottom?1:0}i.moveTo(i.pos+l*i.screen)});function f(j){var k=b.wheelEventPixels(j)[i.orientation=="horizontal"?"x":"y"];var l=i.pos;i.moveTo(i.pos+k);if(i.pos!=l){b.e_preventDefault(j)}}b.on(this.node,"mousewheel",f);b.on(this.node,"DOMMouseScroll",f)}a.prototype.setPos=function(f,e){if(f<0){f=0}if(f>this.total-this.screen){f=this.total-this.screen}if(!e&&f==this.pos){return false}this.pos=f;this.inner.style[this.orientation=="horizontal"?"left":"top"]=(f*(this.size/this.total))+"px";return true};a.prototype.moveTo=function(e){if(this.setPos(e)){this.scroll(e,this.orientation)}};var c=10;a.prototype.update=function(h,g,e){var i=this.screen!=g||this.total!=h||this.size!=e;if(i){this.screen=g;this.total=h;this.size=e}var f=this.screen*(this.size/this.total);if(f<c){this.size-=c-f;f=c}this.inner.style[this.orientation=="horizontal"?"width":"height"]=f+"px";this.setPos(this.pos,i)};function d(e,f,g){this.addClass=e;this.horiz=new a(e,"horizontal",g);f(this.horiz.node);this.vert=new a(e,"vertical",g);f(this.vert.node);this.width=null}d.prototype.update=function(e){if(this.width==null){var h=window.getComputedStyle?window.getComputedStyle(this.horiz.node):this.horiz.node.currentStyle;if(h){this.width=parseInt(h.height)}}var i=this.width||0;var f=e.scrollWidth>e.clientWidth+1;var g=e.scrollHeight>e.clientHeight+1;this.vert.node.style.display=g?"block":"none";this.horiz.node.style.display=f?"block":"none";if(g){this.vert.update(e.scrollHeight,e.clientHeight,e.viewHeight-(f?i:0));this.vert.node.style.bottom=f?i+"px":"0"}if(f){this.horiz.update(e.scrollWidth,e.clientWidth,e.viewWidth-(g?i:0)-e.barLeft);this.horiz.node.style.right=g?i+"px":"0";this.horiz.node.style.left=e.barLeft+"px"}return{right:g?i:0,bottom:f?i:0}};d.prototype.setScrollTop=function(e){this.vert.setPos(e)};d.prototype.setScrollLeft=function(e){this.horiz.setPos(e)};d.prototype.clear=function(){var e=this.horiz.node.parentNode;e.removeChild(this.horiz.node);e.removeChild(this.vert.node)};b.scrollbarModel.simple=function(e,f){return new d("CodeMirror-simplescroll",e,f)};b.scrollbarModel.overlay=function(e,f){return new d("CodeMirror-overlayscroll",e,f)}});