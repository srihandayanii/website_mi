(function(a){if(typeof exports=="object"&&typeof module=="object"){a(require("../../lib/codemirror"))}else{if(typeof define=="function"&&define.amd){define(["../../lib/codemirror"],a)}else{a(CodeMirror)}}})(function(a){var e=["clike","css","javascript"];for(var d=0;d<e.length;++d){a.extendMode(e[d],{blockCommentContinue:" * "})}function b(f){if(f.getOption("disableInput")){return a.Pass}var t=f.listSelections(),q,n=[];for(var l=0;l<t.length;l++){var s=t[l].head,u=f.getTokenAt(s);if(u.type!="comment"){return a.Pass}var r=a.innerMode(f.getMode(),u.state).mode;if(!q){q=r}else{if(q!=r){return a.Pass}}var m=null;if(q.blockCommentStart&&q.blockCommentContinue){var g=u.string.indexOf(q.blockCommentEnd);var k=f.getRange(a.Pos(s.line,0),a.Pos(s.line,u.end)),h;if(g!=-1&&g==u.string.length-q.blockCommentEnd.length&&s.ch>=g){}else{if(u.string.indexOf(q.blockCommentStart)==0){m=k.slice(0,u.start);if(!/^\s*$/.test(m)){m="";for(var o=0;o<u.start;++o){m+=" "}}}else{if((h=k.indexOf(q.blockCommentContinue))!=-1&&h+q.blockCommentContinue.length>u.start&&/^\s*$/.test(k.slice(0,h))){m=k.slice(0,h)}}}if(m!=null){m+=q.blockCommentContinue}}if(m==null&&q.lineComment&&c(f)){var p=f.getLine(s.line),h=p.indexOf(q.lineComment);if(h>-1){m=p.slice(0,h);if(/\S/.test(m)){m=null}else{m+=q.lineComment+p.slice(h+q.lineComment.length).match(/^\s*/)[0]}}}if(m==null){return a.Pass}n[l]="\n"+m}f.operation(function(){for(var j=t.length-1;j>=0;j--){f.replaceRange(n[j],t[j].from(),t[j].to(),"+insert")}})}function c(f){var g=f.getOption("continueComments");if(g&&typeof g=="object"){return g.continueLineComment!==false}return true}a.defineOption("continueComments",null,function(f,j,i){if(i&&i!=a.Init){f.removeKeyMap("continueComment")}if(j){var g="Enter";if(typeof j=="string"){g=j}else{if(typeof j=="object"&&j.key){g=j.key}}var h={name:"continueComment"};h[g]=b;f.addKeyMap(h)}})});