(function(a){if(typeof exports=="object"&&typeof module=="object"){a(require("../../lib/codemirror"))}else{if(typeof define=="function"&&define.amd){define(["../../lib/codemirror"],a)}else{a(CodeMirror)}}})(function(c){var h="CodeMirror-activeline";var a="CodeMirror-activeline-background";var d="CodeMirror-activeline-gutter";c.defineOption("styleActiveLine",false,function(i,l,j){var k=j&&j!=c.Init;if(l&&!k){i.state.activeLines=[];g(i,i.listSelections());i.on("beforeSelectionChange",f)}else{if(!l&&k){i.off("beforeSelectionChange",f);b(i);delete i.state.activeLines}}});function b(j){for(var k=0;k<j.state.activeLines.length;k++){j.removeLineClass(j.state.activeLines[k],"wrap",h);j.removeLineClass(j.state.activeLines[k],"background",a);j.removeLineClass(j.state.activeLines[k],"gutter",d)}}function e(j,k){if(j.length!=k.length){return false}for(var l=0;l<j.length;l++){if(j[l]!=k[l]){return false}}return true}function g(k,o){var j=[];for(var l=0;l<o.length;l++){var n=o[l];if(!n.empty()){continue}var m=k.getLineHandleVisualStart(n.head.line);if(j[j.length-1]!=m){j.push(m)}}if(e(k.state.activeLines,j)){return}k.operation(function(){b(k);for(var p=0;p<j.length;p++){k.addLineClass(j[p],"wrap",h);k.addLineClass(j[p],"background",a);k.addLineClass(j[p],"gutter",d)}k.state.activeLines=j})}function f(i,j){g(i,j.ranges)}});