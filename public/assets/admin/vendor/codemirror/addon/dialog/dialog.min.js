(function(a){if(typeof exports=="object"&&typeof module=="object"){a(require("../../lib/codemirror"))}else{if(typeof define=="function"&&define.amd){define(["../../lib/codemirror"],a)}else{a(CodeMirror)}}})(function(b){function c(e,g,d){var h=e.getWrapperElement();var f;f=h.appendChild(document.createElement("div"));if(d){f.className="CodeMirror-dialog CodeMirror-dialog-bottom"}else{f.className="CodeMirror-dialog CodeMirror-dialog-top"}if(typeof g=="string"){f.innerHTML=g}else{f.appendChild(g)}return f}function a(d,e){if(d.state.currentNotificationClose){d.state.currentNotificationClose()}d.state.currentNotificationClose=e}b.defineExtension("openDialog",function(l,e,k){if(!k){k={}}a(this,null);var h=c(this,l,k.bottom);var g=false,j=this;function f(m){if(typeof m=="string"){i.value=m}else{if(g){return}g=true;h.parentNode.removeChild(h);j.focus();if(k.onClose){k.onClose(h)}}}var i=h.getElementsByTagName("input")[0],d;if(i){i.focus();if(k.value){i.value=k.value;if(k.selectValueOnOpen!==false){i.select()}}if(k.onInput){b.on(i,"input",function(m){k.onInput(m,i.value,f)})}if(k.onKeyUp){b.on(i,"keyup",function(m){k.onKeyUp(m,i.value,f)})}b.on(i,"keydown",function(m){if(k&&k.onKeyDown&&k.onKeyDown(m,i.value,f)){return}if(m.keyCode==27||(k.closeOnEnter!==false&&m.keyCode==13)){i.blur();b.e_stop(m);f()}if(m.keyCode==13){e(i.value,m)}});if(k.closeOnBlur!==false){b.on(i,"blur",f)}}else{if(d=h.getElementsByTagName("button")[0]){b.on(d,"click",function(){f();j.focus()});if(k.closeOnBlur!==false){b.on(d,"blur",f)}d.focus()}}return f});b.defineExtension("openConfirm",function(o,g,n){a(this,null);var k=c(this,o,n&&n.bottom);var f=k.getElementsByTagName("button");var j=false,m=this,e=1;function h(){if(j){return}j=true;k.parentNode.removeChild(k);m.focus()}f[0].focus();for(var l=0;l<f.length;++l){var d=f[l];(function(i){b.on(d,"click",function(p){b.e_preventDefault(p);h();if(i){i(m)}})})(g[l]);b.on(d,"blur",function(){--e;setTimeout(function(){if(e<=0){h()}},200)});b.on(d,"focus",function(){++e})}});b.defineExtension("openNotification",function(j,i){a(this,d);var f=c(this,j,i&&i.bottom);var e=false,g;var h=i&&typeof i.duration!=="undefined"?i.duration:5000;function d(){if(e){return}e=true;clearTimeout(g);f.parentNode.removeChild(f)}b.on(f,"click",function(k){b.e_preventDefault(k);d()});if(h){g=setTimeout(d,h)}return d})});