(function(a){if(typeof exports=="object"&&typeof module=="object"){a(require("../../lib/codemirror"))}else{if(typeof define=="function"&&define.amd){define(["../../lib/codemirror"],a)}else{a(CodeMirror)}}})(function(a){a.registerGlobalHelper("fold","comment",function(b){return b.blockCommentStart&&b.blockCommentEnd},function(c,s){var n=c.getModeAt(s),u=n.blockCommentStart,g=n.blockCommentEnd;if(!u||!g){return}var l=s.line,m=c.getLine(l);var t;for(var b=s.ch,q=0;;){var h=b<=0?-1:m.lastIndexOf(u,b-1);if(h==-1){if(q==1){return}q=1;b=m.length;continue}if(q==1&&h<s.ch){return}if(/comment/.test(c.getTokenTypeAt(a.Pos(l,h+1)))&&(h==0||m.slice(h-g.length,h)==g||!/comment/.test(c.getTokenTypeAt(a.Pos(l,h))))){t=h+u.length;break}b=h-1}var d=1,k=c.lastLine(),e,f;outer:for(var j=l;j<=k;++j){var v=c.getLine(j),r=j==l?t:0;for(;;){var p=v.indexOf(u,r),o=v.indexOf(g,r);if(p<0){p=v.length}if(o<0){o=v.length}r=Math.min(p,o);if(r==v.length){break}if(r==p){++d}else{if(!--d){e=j;f=r;break outer}}++r}}if(e==null||l==e&&f==t){return}return{from:a.Pos(l,t),to:a.Pos(e,f)}})});