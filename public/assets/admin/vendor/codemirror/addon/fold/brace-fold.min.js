(function(a){if(typeof exports=="object"&&typeof module=="object"){a(require("../../lib/codemirror"))}else{if(typeof define=="function"&&define.amd){define(["../../lib/codemirror"],a)}else{a(CodeMirror)}}})(function(a){a.registerHelper("fold","brace",function(b,p){var k=p.line,l=b.getLine(k);var t;function g(v){for(var i=p.ch,w=0;;){var u=i<=0?-1:l.lastIndexOf(v,i-1);if(u==-1){if(w==1){break}w=1;i=l.length;continue}if(w==1&&u<p.ch){break}t=b.getTokenTypeAt(a.Pos(k,u+1));if(!/^(comment|string)/.test(t)){return u+1}i=u-1}}var r="{",f="}",q=g("{");if(q==null){r="[",f="]";q=g("[")}if(q==null){return}var c=1,j=b.lastLine(),d,e;outer:for(var h=k;h<=j;++h){var s=b.getLine(h),o=h==k?q:0;for(;;){var n=s.indexOf(r,o),m=s.indexOf(f,o);if(n<0){n=s.length}if(m<0){m=s.length}o=Math.min(n,m);if(o==s.length){break}if(b.getTokenTypeAt(a.Pos(h,o+1))==t){if(o==n){++c}else{if(!--c){d=h;e=o;break outer}}}++o}}if(d==null||k==d&&e==q){return}return{from:a.Pos(k,q),to:a.Pos(d,e)}});a.registerHelper("fold","import",function(b,h){function e(l){if(l<b.firstLine()||l>b.lastLine()){return null}var n=b.getTokenAt(a.Pos(l,1));if(!/\S/.test(n.string)){n=b.getTokenAt(a.Pos(l,n.end+1))}if(n.type!="keyword"||n.string!="import"){return null}for(var k=l,j=Math.min(b.lastLine(),l+10);k<=j;++k){var o=b.getLine(k),m=o.indexOf(";");if(m!=-1){return{startCh:n.end,end:a.Pos(k,m)}}}}var i=h.line,d=e(i),g;if(!d||e(i-1)||((g=e(i-2))&&g.end.line==i-1)){return null}for(var c=d.end;;){var f=e(c.line+1);if(f==null){break}c=f.end}return{from:b.clipPos(a.Pos(i,d.startCh+1)),to:c}});a.registerHelper("fold","include",function(b,g){function e(i){if(i<b.firstLine()||i>b.lastLine()){return null}var j=b.getTokenAt(a.Pos(i,1));if(!/\S/.test(j.string)){j=b.getTokenAt(a.Pos(i,j.end+1))}if(j.type=="meta"&&j.string.slice(0,8)=="#include"){return j.start+8}}var h=g.line,d=e(h);if(d==null||e(h-1)!=null){return null}for(var c=h;;){var f=e(c+1);if(f==null){break}++c}return{from:a.Pos(h,d+1),to:b.clipPos(a.Pos(c))}})});