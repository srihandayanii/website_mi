(function(a){if(typeof exports=="object"&&typeof module=="object"){a(require("../../lib/codemirror"))}else{if(typeof define=="function"&&define.amd){define(["../../lib/codemirror"],a)}else{a(CodeMirror)}}})(function(c){c.defineSimpleMode=function(k,l){c.defineMode(k,function(m){return c.simpleMode(m,l)})};c.simpleMode=function(k,u){d(u,"start");var v={},p=u.meta||{},m=false;for(var t in u){if(t!=p&&u.hasOwnProperty(t)){var o=v[t]=[],r=u[t];for(var n=0;n<r.length;n++){var l=r[n];o.push(new h(l,u));if(l.indent||l.dedent){m=true}}}}var q={startState:function(){return{state:"start",pending:null,local:null,localState:null,indent:m?[]:null}},copyState:function(y){var x={state:y.state,pending:y.pending,local:y.local,localState:null,indent:y.indent&&y.indent.slice(0)};if(y.localState){x.localState=c.copyState(y.local.mode,y.localState)}if(y.stack){x.stack=y.stack.slice(0)}for(var w=y.persistentStates;w;w=w.next){x.persistentStates={mode:w.mode,spec:w.spec,state:w.state==y.localState?x.localState:c.copyState(w.mode,w.state),next:x.persistentStates}}return x},token:i(v,k),innerMode:function(w){return w.local&&{mode:w.local.mode,state:w.localState}},indent:f(v,p)};if(p){for(var s in p){if(p.hasOwnProperty(s)){q[s]=p[s]}}}return q};function d(l,k){if(!l.hasOwnProperty(k)){throw new Error("Undefined state "+k+" in simple mode")}}function j(m,k){if(!m){return/(?:)/}var l="";if(m instanceof RegExp){if(m.ignoreCase){l="i"}m=m.source}else{m=String(m)}return new RegExp((k===false?"":"^")+"(?:"+m+")",l)}function a(m){if(!m){return null}if(typeof m=="string"){return m.replace(/\./g," ")}var l=[];for(var k=0;k<m.length;k++){l.push(m[k]&&m[k].replace(/\./g," "))}return l}function h(k,l){if(k.next||k.push){d(l,k.next||k.push)}this.regex=j(k.regex);this.token=a(k.token);this.data=k}function i(l,k){return function(v,u){if(u.pending){var s=u.pending.shift();if(u.pending.length==0){u.pending=null}v.pos+=s.text.length;return s.token}if(u.local){if(u.local.end&&v.match(u.local.end)){var w=u.local.endToken||null;u.local=u.localState=null;return w}else{var w=u.local.mode.token(v,u.localState),q;if(u.local.endScan&&(q=u.local.endScan.exec(v.current()))){v.pos=v.start+q.index}return w}}var n=l[u.state];for(var o=0;o<n.length;o++){var t=n[o];var r=(!t.data.sol||v.sol())&&v.match(t.regex);if(r){if(t.data.next){u.state=t.data.next}else{if(t.data.push){(u.stack||(u.stack=[])).push(u.state);u.state=t.data.push}else{if(t.data.pop&&u.stack&&u.stack.length){u.state=u.stack.pop()}}}if(t.data.mode){e(k,u,t.data.mode,t.token)}if(t.data.indent){u.indent.push(v.indentation()+k.indentUnit)}if(t.data.dedent){u.indent.pop()}if(r.length>2){u.pending=[];for(var p=2;p<r.length;p++){if(r[p]){u.pending.push({text:r[p],token:t.token[p-1]})}}v.backUp(r[0].length-(r[1]?r[1].length:0));return t.token[0]}else{if(t.token&&t.token.join){return t.token[0]}else{return t.token}}}}v.next();return null}}function b(k,l){if(k===l){return true}if(!k||typeof k!="object"||!l||typeof l!="object"){return false}var n=0;for(var m in k){if(k.hasOwnProperty(m)){if(!l.hasOwnProperty(m)||!b(k[m],l[m])){return false}n++}}for(var m in l){if(l.hasOwnProperty(m)){n--}}return n==0}function e(k,r,q,s){var o;if(q.persistent){for(var n=r.persistentStates;n&&!o;n=n.next){if(q.spec?b(q.spec,n.spec):q.mode==n.mode){o=n}}}var m=o?o.mode:q.mode||c.getMode(k,q.spec);var l=o?o.state:c.startState(m);if(q.persistent&&!o){r.persistentStates={mode:m,spec:q.spec,state:l,next:r.persistentStates}}r.localState=l;r.local={mode:m,end:q.end&&j(q.end),endScan:q.end&&q.forceEnd!==false&&j(q.end,false),endToken:s&&s.join?s[s.length-1]:s}}function g(m,k){for(var l=0;l<k.length;l++){if(k[l]===m){return true}}}function f(l,k){return function(t,u,o){if(t.local&&t.local.mode.indent){return t.local.mode.indent(t.localState,u,o)}if(t.indent==null||t.local||k.dontIndentStates&&g(t.state,k.dontIndentStates)>-1){return c.Pass}var q=t.indent.length-1,s=l[t.state];scan:for(;;){for(var n=0;n<s.length;n++){var r=s[n];if(r.data.dedent&&r.data.dedentIfLineStart!==false){var p=r.regex.exec(u);if(p&&p[0]){q--;if(r.next||r.push){s=l[r.next||r.push]}u=u.slice(p[0].length);continue scan}}}break}return q<0?0:t.indent[q]}}});