(function(a){if(typeof exports=="object"&&typeof module=="object"){a(require("../../lib/codemirror"))}else{if(typeof define=="function"&&define.amd){define(["../../lib/codemirror"],a)}else{a(CodeMirror)}}})(function(a){a.overlayMode=function(b,d,c){return{startState:function(){return{base:a.startState(b),overlay:a.startState(d),basePos:0,baseCur:null,overlayPos:0,overlayCur:null,streamSeen:null}},copyState:function(e){return{base:a.copyState(b,e.base),overlay:a.copyState(d,e.overlay),basePos:e.basePos,baseCur:null,overlayPos:e.overlayPos,overlayCur:null}},token:function(f,e){if(f!=e.streamSeen||Math.min(e.basePos,e.overlayPos)<f.start){e.streamSeen=f;e.basePos=e.overlayPos=f.start}if(f.start==e.basePos){e.baseCur=b.token(f,e.base);e.basePos=f.pos}if(f.start==e.overlayPos){f.pos=f.start;e.overlayCur=d.token(f,e.overlay);e.overlayPos=f.pos}f.pos=Math.min(e.basePos,e.overlayPos);if(e.overlayCur==null){return e.baseCur}else{if(e.baseCur!=null&&e.overlay.combineTokens||c&&e.overlay.combineTokens==null){return e.baseCur+" "+e.overlayCur}else{return e.overlayCur}}},indent:b.indent&&function(e,f){return b.indent(e.base,f)},electricChars:b.electricChars,innerMode:function(e){return{state:e.base,mode:b}},blankLine:function(e){if(b.blankLine){b.blankLine(e.base)}if(d.blankLine){d.blankLine(e.overlay)}}}}});