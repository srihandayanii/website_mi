(function(a){if(typeof exports=="object"&&typeof module=="object"){a(require("../../lib/codemirror"))}else{if(typeof define=="function"&&define.amd){define(["../../lib/codemirror"],a)}else{a(CodeMirror)}}})(function(a){a.defineMode("coffeescript",function(e,q){var i="error";function x(y){return new RegExp("^(("+y.join(")|(")+"))\\b")}var p=/^(?:->|=>|\+[+=]?|-[\-=]?|\*[\*=]?|\/[\/=]?|[=!]=|<[><]?=?|>>?=?|%=?|&=?|\|=?|\^=?|\~|!|\?|(or|and|\|\||&&|\?)=)/;var h=/^(?:[()\[\]{},:`=;]|\.\.?\.?)/;var k=/^[_A-Za-z$][_A-Za-z$0-9]*/;var b=/^@[_A-Za-z$][_A-Za-z$0-9]*/;var w=x(["and","or","not","is","isnt","in","instanceof","typeof"]);var m=["for","while","loop","if","unless","else","switch","try","catch","finally","class"];var d=["break","by","continue","debugger","delete","do","in","of","new","return","then","this","@","throw","when","until","extends"];var n=x(m.concat(d));m=x(m);var s=/^('{3}|\"{3}|['\"])/;var r=/^(\/{3}|\/)/;var c=["Infinity","NaN","undefined","null","true","false","on","off","yes","no"];var f=x(c);function t(E,D){if(E.sol()){if(D.scope.align===null){D.scope.align=false}var C=D.scope.offset;if(E.eatSpace()){var B=E.indentation();if(B>C&&D.scope.type=="coffee"){return"indent"}else{if(B<C){return"dedent"}}return null}else{if(C>0){g(E,D)}}}if(E.eatSpace()){return null}var y=E.peek();if(E.match("####")){E.skipToEnd();return"comment"}if(E.match("###")){D.tokenize=o;return D.tokenize(E,D)}if(y==="#"){E.skipToEnd();return"comment"}if(E.match(/^-?[0-9\.]/,false)){var z=false;if(E.match(/^-?\d*\.\d+(e[\+\-]?\d+)?/i)){z=true}if(E.match(/^-?\d+\.\d*/)){z=true}if(E.match(/^-?\.\d+/)){z=true}if(z){if(E.peek()=="."){E.backUp(1)}return"number"}var A=false;if(E.match(/^-?0x[0-9a-f]+/i)){A=true}if(E.match(/^-?[1-9]\d*(e[\+\-]?\d+)?/)){A=true}if(E.match(/^-?0(?![\dx])/i)){A=true}if(A){return"number"}}if(E.match(s)){D.tokenize=u(E.current(),false,"string");return D.tokenize(E,D)}if(E.match(r)){if(E.current()!="/"||E.match(/^.*\//,false)){D.tokenize=u(E.current(),true,"string-2");return D.tokenize(E,D)}else{E.backUp(1)}}if(E.match(p)||E.match(w)){return"operator"}if(E.match(h)){return"punctuation"}if(E.match(f)){return"atom"}if(E.match(b)||D.prop&&E.match(k)){return"property"}if(E.match(n)){return"keyword"}if(E.match(k)){return"variable"}E.next();return i}function u(y,A,z){return function(C,B){while(!C.eol()){C.eatWhile(/[^'"\/\\]/);if(C.eat("\\")){C.next();if(A&&C.eol()){return z}}else{if(C.match(y)){B.tokenize=t;return z}else{C.eat(/['"\/]/)}}}if(A){if(q.singleLineStringErrors){z=i}else{B.tokenize=t}}return z}}function o(z,y){while(!z.eol()){z.eatWhile(/[^#]/);if(z.match("###")){y.tokenize=t;break}z.eatWhile("#")}return"comment"}function l(D,C,E){E=E||"coffee";var A=0,y=false,z=null;for(var B=C.scope;B;B=B.prev){if(B.type==="coffee"||B.type=="}"){A=B.offset+e.indentUnit;break}}if(E!=="coffee"){y=null;z=D.column()+D.current().length}else{if(C.scope.align){C.scope.align=false}}C.scope={offset:A,type:E,prev:C.scope,align:y,alignOffset:z}}function g(C,B){if(!B.scope.prev){return}if(B.scope.type==="coffee"){var y=C.indentation();var z=false;for(var A=B.scope;A;A=A.prev){if(y===A.offset){z=true;break}}if(!z){return true}while(B.scope.prev&&B.scope.offset!==y){B.scope=B.scope.prev}return false}else{B.scope=B.scope.prev;return false}}function v(B,A){var C=A.tokenize(B,A);var y=B.current();if(y==="return"){A.dedent=true}if(((y==="->"||y==="=>")&&B.eol())||C==="indent"){l(B,A)}var z="[({".indexOf(y);if(z!==-1){l(B,A,"])}".slice(z,z+1))}if(m.exec(y)){l(B,A)}if(y=="then"){g(B,A)}if(C==="dedent"){if(g(B,A)){return i}}z="])}".indexOf(y);if(z!==-1){while(A.scope.type=="coffee"&&A.scope.prev){A.scope=A.scope.prev}if(A.scope.type==y){A.scope=A.scope.prev}}if(A.dedent&&B.eol()){if(A.scope.type=="coffee"&&A.scope.prev){A.scope=A.scope.prev}A.dedent=false}return C}var j={startState:function(y){return{tokenize:t,scope:{offset:y||0,type:"coffee",prev:null,align:false},prop:false,dedent:0}},token:function(A,z){var y=z.scope.align===null&&z.scope;if(y&&A.sol()){y.align=false}var B=v(A,z);if(B&&B!="comment"){if(y){y.align=true}z.prop=B=="punctuation"&&A.current()=="."}return B},indent:function(B,C){if(B.tokenize!=t){return 0}var A=B.scope;var y=C&&"])}".indexOf(C.charAt(0))>-1;if(y){while(A.type=="coffee"&&A.prev){A=A.prev}}var z=y&&A.type===C.charAt(0);if(A.align){return A.alignOffset-(z?1:0)}else{return(z?A.prev:A).offset}},lineComment:"#",fold:"indent"};return j});a.defineMIME("text/x-coffeescript","coffeescript");a.defineMIME("text/coffeescript","coffeescript")});