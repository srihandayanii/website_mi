(function(a){if(typeof exports=="object"&&typeof module=="object"){a(require("../../lib/codemirror"))}else{if(typeof define=="function"&&define.amd){define(["../../lib/codemirror"],a)}else{a(CodeMirror)}}})(function(a){a.defineMode("dtd",function(b){var d=b.indentUnit,i;function e(j,k){i=k;return j}function f(m,l){var j=m.next();if(j=="<"&&m.eat("!")){if(m.eatWhile(/[\-]/)){l.tokenize=g;return g(m,l)}else{if(m.eatWhile(/[\w]/)){return e("keyword","doindent")}}}else{if(j=="<"&&m.eat("?")){l.tokenize=c("meta","?>");return e("meta",j)}else{if(j=="#"&&m.eatWhile(/[\w]/)){return e("atom","tag")}else{if(j=="|"){return e("keyword","seperator")}else{if(j.match(/[\(\)\[\]\-\.,\+\?>]/)){return e(null,j)}else{if(j.match(/[\[\]]/)){return e("rule",j)}else{if(j=='"'||j=="'"){l.tokenize=h(j);return l.tokenize(m,l)}else{if(m.eatWhile(/[a-zA-Z\?\+\d]/)){var k=m.current();if(k.substr(k.length-1,k.length).match(/\?|\+/)!==null){m.backUp(1)}return e("tag","tag")}else{if(j=="%"||j=="*"){return e("number","number")}else{m.eatWhile(/[\w\\\-_%.{,]/);return e(null,null)}}}}}}}}}}function g(m,l){var k=0,j;while((j=m.next())!=null){if(k>=2&&j==">"){l.tokenize=f;break}k=(j=="-")?k+1:0}return e("comment","comment")}function h(j){return function(n,m){var l=false,k;while((k=n.next())!=null){if(k==j&&!l){m.tokenize=f;break}l=!l&&k=="\\"}return e("string","tag")}}function c(j,k){return function(m,l){while(!m.eol()){if(m.match(k)){l.tokenize=f;break}m.next()}return j}}return{startState:function(j){return{tokenize:f,baseIndent:j||0,stack:[]}},token:function(l,k){if(l.eatSpace()){return null}var m=k.tokenize(l,k);var j=k.stack[k.stack.length-1];if(l.current()=="["||i==="doindent"||i=="["){k.stack.push("rule")}else{if(i==="endtag"){k.stack[k.stack.length-1]="endtag"}else{if(l.current()=="]"||i=="]"||(i==">"&&j=="rule")){k.stack.pop()}else{if(i=="["){k.stack.push("[")}}}}return m},indent:function(k,l){var j=k.stack.length;if(l.match(/\]\s+|\]/)){j=j-1}else{if(l.substr(l.length-1,l.length)===">"){if(l.substr(0,1)==="<"){}else{if(i=="doindent"&&l.length>1){}else{if(i=="doindent"){j--}else{if(i==">"&&l.length>1){}else{if(i=="tag"&&l!==">"){}else{if(i=="tag"&&k.stack[k.stack.length-1]=="rule"){j--}else{if(i=="tag"){j++}else{if(l===">"&&k.stack[k.stack.length-1]=="rule"&&i===">"){j--}else{if(l===">"&&k.stack[k.stack.length-1]=="rule"){}else{if(l.substr(0,1)!=="<"&&l.substr(0,1)===">"){j=j-1}else{if(l===">"){}else{j=j-1}}}}}}}}}}}if(i==null||i=="]"){j--}}}return k.baseIndent+j*d},electricChars:"]>"}});a.defineMIME("application/xml-dtd","dtd")});