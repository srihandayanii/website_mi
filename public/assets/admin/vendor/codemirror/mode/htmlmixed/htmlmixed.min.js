(function(a){if(typeof exports=="object"&&typeof module=="object"){a(require("../../lib/codemirror"),require("../xml/xml"),require("../javascript/javascript"),require("../css/css"))}else{if(typeof define=="function"&&define.amd){define(["../../lib/codemirror","../xml/xml","../javascript/javascript","../css/css"],a)}else{a(CodeMirror)}}})(function(c){var d={script:[["lang",/(javascript|babel)/i,"javascript"],["type",/^(?:text|application)\/(?:x-)?(?:java|ecma)script$|^$/i,"javascript"],["type",/./,"text/plain"],[null,null,"javascript"]],style:[["lang",/^css$/i,"css"],["type",/^(text\/)?(x-)?(stylesheet|css)$/i,"css"],["type",/./,"text/plain"],[null,null,"css"]]};function i(m,l,n){var k=m.current(),j=k.search(l);if(j>-1){m.backUp(k.length-j)}else{if(k.match(/<\/?$/)){m.backUp(k.length);if(!m.match(l,false)){m.match(k)}}}return n}var b={};function f(j){var k=b[j];if(k){return k}return b[j]=new RegExp("\\s+"+j+"\\s*=\\s*('|\")?([^'\"]+)('|\")?\\s*")}function g(l,j){var k=l.match(f(j));return k?/^\s*(.*?)\s*$/.exec(k[2])[1]:""}function h(k,j){return new RegExp((j?"^":"")+"</s*"+k+"s*>","i")}function a(k,o){for(var n in k){var j=o[n]||(o[n]=[]);var m=k[n];for(var l=m.length-1;l>=0;l--){j.unshift(m[l])}}}function e(l,m){for(var j=0;j<l.length;j++){var k=l[j];if(!k[0]||k[1].test(g(m,k[0]))){return k[2]}}}c.defineMode("htmlmixed",function(j,p){var n=c.getMode(j,{name:"xml",htmlMode:true,multilineTagIndentFactor:p.multilineTagIndentFactor,multilineTagIndentPastTag:p.multilineTagIndentPastTag});var q={};var l=p&&p.tags,k=p&&p.scriptTypes;a(d,q);if(l){a(l,q)}if(k){for(var o=k.length-1;o>=0;o--){q.script.unshift(["type",k[o].matches,k[o].mode])}}function m(x,w){var y=n.token(x,w.htmlState),z=/\btag\b/.test(y),A;if(z&&!/[<>\s\/]/.test(x.current())&&(A=w.htmlState.tagName&&w.htmlState.tagName.toLowerCase())&&q.hasOwnProperty(A)){w.inTag=A+" "}else{if(w.inTag&&z&&/>$/.test(x.current())){var t=/^([\S]+) (.*)/.exec(w.inTag);w.inTag=null;var v=x.current()==">"&&e(q[t[1]],t[2]);var u=c.getMode(j,v);var s=h(t[1],true),r=h(t[1],false);w.token=function(C,B){if(C.match(s,false)){B.token=m;B.localState=B.localMode=null;return null}return i(C,r,B.localMode.token(C,B.localState))};w.localMode=u;w.localState=c.startState(u,n.indent(w.htmlState,""))}else{if(w.inTag){w.inTag+=x.current();if(x.eol()){w.inTag+=" "}}}}return y}return{startState:function(){var r=c.startState(n);return{token:m,inTag:null,localMode:null,localState:null,htmlState:r}},copyState:function(s){var r;if(s.localState){r=c.copyState(s.localMode,s.localState)}return{token:s.token,inTag:s.inTag,localMode:s.localMode,localState:r,htmlState:c.copyState(n,s.htmlState)}},token:function(s,r){return r.token(s,r)},indent:function(r,s){if(!r.localMode||/^\s*<\//.test(s)){return n.indent(r.htmlState,s)}else{if(r.localMode.indent){return r.localMode.indent(r.localState,s)}else{return c.Pass}}},innerMode:function(r){return{state:r.localState||r.htmlState,mode:r.localMode||n}}}},"xml","javascript","css");c.defineMIME("text/html","htmlmixed")});