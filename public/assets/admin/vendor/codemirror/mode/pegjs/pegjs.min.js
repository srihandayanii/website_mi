(function(a){if(typeof exports=="object"&&typeof module=="object"){a(require("../../lib/codemirror"),require("../javascript/javascript"))}else{if(typeof define=="function"&&define.amd){define(["../../lib/codemirror","../javascript/javascript"],a)}else{a(CodeMirror)}}})(function(a){a.defineMode("pegjs",function(b){var d=a.getMode(b,"javascript");function c(e){return e.match(/^[a-zA-Z_][a-zA-Z0-9_]*/)}return{startState:function(){return{inString:false,stringType:null,inComment:false,inCharacterClass:false,braced:0,lhs:true,localState:null}},token:function(g,f){if(g){if(!f.inString&&!f.inComment&&((g.peek()=='"')||(g.peek()=="'"))){f.stringType=g.peek();g.next();f.inString=true}}if(!f.inString&&!f.inComment&&g.match(/^\/\*/)){f.inComment=true}if(f.inString){while(f.inString&&!g.eol()){if(g.peek()===f.stringType){g.next();f.inString=false}else{if(g.peek()==="\\"){g.next();g.next()}else{g.match(/^.[^\\\"\']*/)}}}return f.lhs?"property string":"string"}else{if(f.inComment){while(f.inComment&&!g.eol()){if(g.match(/\*\//)){f.inComment=false}else{g.match(/^.[^\*]*/)}}return"comment"}else{if(f.inCharacterClass){while(f.inCharacterClass&&!g.eol()){if(!(g.match(/^[^\]\\]+/)||g.match(/^\\./))){f.inCharacterClass=false}}}else{if(g.peek()==="["){g.next();f.inCharacterClass=true;return"bracket"}else{if(g.match(/^\/\//)){g.skipToEnd();return"comment"}else{if(f.braced||g.peek()==="{"){if(f.localState===null){f.localState=a.startState(d)}var j=d.token(g,f.localState);var h=g.current();if(!j){for(var e=0;e<h.length;e++){if(h[e]==="{"){f.braced++}else{if(h[e]==="}"){f.braced--}}}}return j}else{if(c(g)){if(g.peek()===":"){return"variable"}return"variable-2"}else{if(["[","]","(",")"].indexOf(g.peek())!=-1){g.next();return"bracket"}else{if(!g.eatSpace()){g.next()}}}}}}}}}return null}}},"javascript")});