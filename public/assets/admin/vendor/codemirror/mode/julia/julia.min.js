(function(a){if(typeof exports=="object"&&typeof module=="object"){a(require("../../lib/codemirror"))}else{if(typeof define=="function"&&define.amd){define(["../../lib/codemirror"],a)}else{a(CodeMirror)}}})(function(a){a.defineMode("julia",function(b,x){var m="error";function H(J,I){if(typeof I==="undefined"){I="\\b"}return new RegExp("^(("+J.join(")|(")+"))"+I)}var u="\\\\[0-7]{1,3}";var o="\\\\x[A-Fa-f0-9]{1,2}";var z="\\\\[abfnrtv0%?'\"\\\\]";var y="([^\\u0027\\u005C\\uD800-\\uDFFF]|[\\uD800-\\uDFFF][\\uDC00-\\uDFFF])";var w=x.operators||/^\.?[|&^\\%*+\-<>!=\/]=?|\?|~|:|\$|\.[<>]|<<=?|>>>?=?|\.[<>=]=|->?|\/\/|\bin\b(?!\()|[\u2208\u2209](?!\()/;var l=x.delimiters||/^[;,()[\]{}]/;var p=x.identifiers||/^[_A-Za-z\u00A1-\uFFFF][\w\u00A1-\uFFFF]*!*/;var i=[u,o,z,y];var d=["begin","function","type","immutable","let","macro","for","while","quote","if","else","elseif","try","finally","catch","do"];var c=["end","else","elseif","catch","finally"];var r=["if","else","elseif","while","for","begin","let","end","do","try","catch","finally","return","break","continue","global","local","const","export","import","importall","using","function","macro","module","baremodule","type","immutable","quote","typealias","abstract","bitstype"];var e=["true","false","nothing","NaN","Inf"];var A=/^(`|"{3}|([brv]?"))/;var h=H(i,"'");var s=H(r);var f=H(e);var v=H(d);var j=H(c);var t=/^@[_A-Za-z][\w]*/;var B=/^:[_A-Za-z\u00A1-\uFFFF][\w\u00A1-\uFFFF]*!*/;var G=/^::[^,;"{()=$\s]+({[^}]*}+)*/;function q(J){var I=k(J);if(I=="["){return true}return false}function k(I){if(I.scopes.length==0){return null}return I.scopes[I.scopes.length-1]}function C(Q,P){if(Q.match(/^#=/,false)){P.tokenize=E;return P.tokenize(Q,P)}var L=P.leavingExpr;if(Q.sol()){L=false}P.leavingExpr=false;if(L){if(Q.match(/^'+/)){return"operator"}}if(Q.match(/^\.{2,3}/)){return"operator"}if(Q.eatSpace()){return null}var I=Q.peek();if(I==="#"){Q.skipToEnd();return"comment"}if(I==="["){P.scopes.push("[")}if(I==="("){P.scopes.push("(")}var O=k(P);if(O=="["&&I==="]"){P.scopes.pop();P.leavingExpr=true}if(O=="("&&I===")"){P.scopes.pop();P.leavingExpr=true}var M;if(!q(P)&&(M=Q.match(v,false))){P.scopes.push(M)}if(!q(P)&&Q.match(j,false)){P.scopes.pop()}if(q(P)){if(P.lastToken=="end"&&Q.match(/^:/)){return"operator"}if(Q.match(/^end/)){return"number"}}if(Q.match(/^=>/)){return"operator"}if(Q.match(/^[0-9\.]/,false)){var J=RegExp(/^im\b/);var N=false;if(Q.match(/^\d*\.(?!\.)\d*([Eef][\+\-]?\d+)?/i)){N=true}if(Q.match(/^\d+\.(?!\.)\d*/)){N=true}if(Q.match(/^\.\d+/)){N=true}if(Q.match(/^0x\.[0-9a-f]+p[\+\-]?\d+/i)){N=true}if(Q.match(/^0x[0-9a-f]+/i)){N=true}if(Q.match(/^0b[01]+/i)){N=true}if(Q.match(/^0o[0-7]+/i)){N=true}if(Q.match(/^[1-9]\d*(e[\+\-]?\d+)?/)){N=true}if(Q.match(/^0(?![\dx])/i)){N=true}if(N){Q.match(J);P.leavingExpr=true;return"number"}}if(Q.match(/^<:/)){return"operator"}if(Q.match(G)){return"builtin"}if(!L&&Q.match(B)||Q.match(/:\./)){return"builtin"}if(Q.match(/^{[^}]*}(?=\()/)){return"builtin"}if(Q.match(w)){return"operator"}if(Q.match(/^'/)){P.tokenize=D;return P.tokenize(Q,P)}if(Q.match(A)){P.tokenize=F(Q.current());return P.tokenize(Q,P)}if(Q.match(t)){return"meta"}if(Q.match(l)){return null}if(Q.match(s)){return"keyword"}if(Q.match(f)){return"builtin"}var K=P.isDefinition||P.lastToken=="function"||P.lastToken=="macro"||P.lastToken=="type"||P.lastToken=="immutable";if(Q.match(p)){if(K){if(Q.peek()==="."){P.isDefinition=true;return"variable"}P.isDefinition=false;return"def"}if(Q.match(/^({[^}]*})*\(/,false)){return g(Q,P)}P.leavingExpr=true;return"variable"}Q.next();return m}function g(L,K){var J=L.match(/^(\(\s*)/);if(J){if(K.firstParenPos<0){K.firstParenPos=K.scopes.length}K.scopes.push("(");K.charsAdvanced+=J[1].length}if(k(K)=="("&&L.match(/^\)/)){K.scopes.pop();K.charsAdvanced+=1;if(K.scopes.length<=K.firstParenPos){var I=L.match(/^\s*?=(?!=)/,false);L.backUp(K.charsAdvanced);K.firstParenPos=-1;K.charsAdvanced=0;if(I){return"def"}return"builtin"}}if(L.match(/^$/g,false)){L.backUp(K.charsAdvanced);while(K.scopes.length>K.firstParenPos){K.scopes.pop()}K.firstParenPos=-1;K.charsAdvanced=0;return"builtin"}K.charsAdvanced+=L.match(/^([^()]*)/)[1].length;return g(L,K)}function E(J,I){if(J.match(/^#=/)){I.weakScopes++}if(!J.match(/.*?(?=(#=|=#))/)){J.skipToEnd()}if(J.match(/^=#/)){I.weakScopes--;if(I.weakScopes==0){I.tokenize=C}}return"comment"}function D(L,K){var I=false,J;if(L.match(h)){I=true}else{if(J=L.match(/\\u([a-f0-9]{1,4})(?=')/i)){var M=parseInt(J[1],16);if(M<=55295||M>=57344){I=true;L.next()}}else{if(J=L.match(/\\U([A-Fa-f0-9]{5,8})(?=')/)){var M=parseInt(J[1],16);if(M<=1114111){I=true;L.next()}}}}if(I){K.leavingExpr=true;K.tokenize=C;return"string"}if(!L.match(/^[^']+(?=')/)){L.skipToEnd()}if(L.match(/^'/)){K.tokenize=C}return m}function F(I){while("bruv".indexOf(I.charAt(0).toLowerCase())>=0){I=I.substr(1)}var J="string";function K(M,L){while(!M.eol()){M.eatWhile(/[^"\\]/);if(M.eat("\\")){M.next()}else{if(M.match(I)){L.tokenize=C;L.leavingExpr=true;return J}else{M.eat(/["]/)}}}return J}K.isString=true;return K}var n={startState:function(){return{tokenize:C,scopes:[],weakScopes:0,lastToken:null,leavingExpr:false,isDefinition:false,charsAdvanced:0,firstParenPos:-1}},token:function(K,J){var L=J.tokenize(K,J);var I=K.current();if(I&&L){J.lastToken=I}if(I==="."){L=K.match(p,false)||K.match(t,false)||K.match(/\(/,false)?"operator":m}return L},indent:function(J,K){var I=0;if(K=="]"||K==")"||K=="end"||K=="else"||K=="elseif"||K=="catch"||K=="finally"){I=-1}return(J.scopes.length+I)*b.indentUnit},electricInput:/(end|else(if)?|catch|finally)$/,lineComment:"#",fold:"indent"};return n});a.defineMIME("text/x-julia","julia")});