(function(a){if(typeof exports=="object"&&typeof module=="object"){a(require("../../lib/codemirror"))}else{if(typeof define=="function"&&define.amd){define(["../../lib/codemirror"],a)}else{a(CodeMirror)}}})(function(a){a.defineMode("q",function(c){var f=c.indentUnit,d,g=b(["abs","acos","aj","aj0","all","and","any","asc","asin","asof","atan","attr","avg","avgs","bin","by","ceiling","cols","cor","cos","count","cov","cross","csv","cut","delete","deltas","desc","dev","differ","distinct","div","do","each","ej","enlist","eval","except","exec","exit","exp","fby","fills","first","fkeys","flip","floor","from","get","getenv","group","gtime","hclose","hcount","hdel","hopen","hsym","iasc","idesc","if","ij","in","insert","inter","inv","key","keys","last","like","list","lj","load","log","lower","lsq","ltime","ltrim","mavg","max","maxs","mcount","md5","mdev","med","meta","min","mins","mmax","mmin","mmu","mod","msum","neg","next","not","null","or","over","parse","peach","pj","plist","prd","prds","prev","prior","rand","rank","ratios","raze","read0","read1","reciprocal","reverse","rload","rotate","rsave","rtrim","save","scan","select","set","setenv","show","signum","sin","sqrt","ss","ssr","string","sublist","sum","sums","sv","system","tables","tan","til","trim","txf","type","uj","ungroup","union","update","upper","upsert","value","var","view","views","vs","wavg","where","where","while","within","wj","wj1","wsum","xasc","xbar","xcol","xcols","xdesc","xexp","xgroup","xkey","xlog","xprev","xrank"]),e=/[|/&^!+:\\\-*%$=~#;@><,?_\'\"\[\(\]\)\s{}]/;function b(o){return new RegExp("^("+o.join("|")+")$")}function j(r,q){var p=r.sol(),o=r.next();d=null;if(p){if(o=="/"){return(q.tokenize=m)(r,q)}else{if(o=="\\"){if(r.eol()||/\s/.test(r.peek())){return r.skipToEnd(),/^\\\s*$/.test(r.current())?(q.tokenize=l)(r,q):q.tokenize=j,"comment"}else{return q.tokenize=j,"builtin"}}}}if(/\s/.test(o)){return r.peek()=="/"?(r.skipToEnd(),"comment"):"whitespace"}if(o=='"'){return(q.tokenize=n)(r,q)}if(o=="`"){return r.eatWhile(/[A-Z|a-z|\d|_|:|\/|\.]/),"symbol"}if(("."==o&&/\d/.test(r.peek()))||/\d/.test(o)){var s=null;r.backUp(1);if(r.match(/^\d{4}\.\d{2}(m|\.\d{2}([D|T](\d{2}(:\d{2}(:\d{2}(\.\d{1,9})?)?)?)?)?)/)||r.match(/^\d+D(\d{2}(:\d{2}(:\d{2}(\.\d{1,9})?)?)?)/)||r.match(/^\d{2}:\d{2}(:\d{2}(\.\d{1,9})?)?/)||r.match(/^\d+[ptuv]{1}/)){s="temporal"}else{if(r.match(/^0[NwW]{1}/)||r.match(/^0x[\d|a-f|A-F]*/)||r.match(/^[0|1]+[b]{1}/)||r.match(/^\d+[chijn]{1}/)||r.match(/-?\d*(\.\d*)?(e[+\-]?\d+)?(e|f)?/)){s="number"}}return(s&&(!(o=r.peek())||e.test(o)))?s:(r.next(),"error")}if(/[A-Z|a-z]|\./.test(o)){return r.eatWhile(/[A-Z|a-z|\.|_|\d]/),g.test(r.current())?"keyword":"variable"}if(/[|/&^!+:\\\-*%$=~#;@><\.,?_\']/.test(o)){return null}if(/[{}\(\[\]\)]/.test(o)){return null}return"error"}function m(p,o){return p.skipToEnd(),/\/\s*$/.test(p.current())?(o.tokenize=k)(p,o):(o.tokenize=j),"comment"}function k(q,p){var o=q.sol()&&q.peek()=="\\";q.skipToEnd();if(o&&/^\\\s*$/.test(q.current())){p.tokenize=j}return"comment"}function l(o){return o.skipToEnd(),"comment"}function n(s,r){var p=false,q,o=false;while((q=s.next())){if(q=='"'&&!p){o=true;break}p=!p&&q=="\\"}if(o){r.tokenize=j}return"string"}function i(p,q,o){p.context={prev:p.context,indent:p.indent,col:o,type:q}}function h(o){o.indent=o.context.indent;o.context=o.context.prev}return{startState:function(){return{tokenize:j,context:null,indent:0,col:0}},token:function(p,o){if(p.sol()){if(o.context&&o.context.align==null){o.context.align=false}o.indent=p.indentation()}var q=o.tokenize(p,o);if(q!="comment"&&o.context&&o.context.align==null&&o.context.type!="pattern"){o.context.align=true}if(d=="("){i(o,")",p.column())}else{if(d=="["){i(o,"]",p.column())}else{if(d=="{"){i(o,"}",p.column())}else{if(/[\]\}\)]/.test(d)){while(o.context&&o.context.type=="pattern"){h(o)}if(o.context&&d==o.context.type){h(o)}}else{if(d=="."&&o.context&&o.context.type=="pattern"){h(o)}else{if(/atom|string|variable/.test(q)&&o.context){if(/[\}\]]/.test(o.context.type)){i(o,"pattern",p.column())}else{if(o.context.type=="pattern"&&!o.context.align){o.context.align=true;o.context.col=p.column()}}}}}}}}return q},indent:function(r,s){var q=s&&s.charAt(0);var p=r.context;if(/[\]\}]/.test(q)){while(p&&p.type=="pattern"){p=p.prev}}var o=p&&q==p.type;if(!p){return 0}else{if(p.type=="pattern"){return p.col}else{if(p.align){return p.col+(o?0:1)}else{return p.indent+(o?0:f)}}}}}});a.defineMIME("text/x-q","q")});