(function(a){if(typeof exports=="object"&&typeof module=="object"){a(require("../../lib/codemirror"))}else{if(typeof define=="function"&&define.amd){define(["../../lib/codemirror"],a)}else{a(CodeMirror)}}})(function(a){var b={autoSelfClosers:{area:true,base:true,br:true,col:true,command:true,embed:true,frame:true,hr:true,img:true,input:true,keygen:true,link:true,meta:true,param:true,source:true,track:true,wbr:true,menuitem:true},implicitlyClosed:{dd:true,li:true,optgroup:true,option:true,p:true,rp:true,rt:true,tbody:true,td:true,tfoot:true,th:true,tr:true},contextGrabbers:{dd:{dd:true,dt:true},dt:{dd:true,dt:true},li:{li:true},option:{option:true,optgroup:true},optgroup:{optgroup:true},p:{address:true,article:true,aside:true,blockquote:true,dir:true,div:true,dl:true,fieldset:true,footer:true,form:true,h1:true,h2:true,h3:true,h4:true,h5:true,h6:true,header:true,hgroup:true,hr:true,menu:true,nav:true,ol:true,p:true,pre:true,section:true,table:true,ul:true},rp:{rp:true,rt:true},rt:{rp:true,rt:true},tbody:{tbody:true,tfoot:true},td:{td:true,th:true},tfoot:{tbody:true},th:{td:true,th:true},thead:{tbody:true,tfoot:true},tr:{tr:true}},doNotIndent:{pre:true},allowUnquoted:true,allowMissing:true,caseFold:true};var c={autoSelfClosers:{},implicitlyClosed:{},contextGrabbers:{},doNotIndent:{},allowUnquoted:false,allowMissing:false,caseFold:false};a.defineMode("xml",function(q,m){var t=q.indentUnit;var l={};var o=m.htmlMode?b:c;for(var y in o){l[y]=o[y]}for(var y in m){l[y]=m[y]}var B,z;function v(G,F){function D(H){F.tokenize=H;return H(G,F)}var C=G.next();if(C=="<"){if(G.eat("!")){if(G.eat("[")){if(G.match("CDATA[")){return D(s("atom","]]>"))}else{return null}}else{if(G.match("--")){return D(s("comment","-->"))}else{if(G.match("DOCTYPE",true,true)){G.eatWhile(/[\w\._\-]/);return D(p(1))}else{return null}}}}else{if(G.eat("?")){G.eatWhile(/[\w\._\-]/);F.tokenize=s("meta","?>");return"meta"}else{B=G.eat("/")?"closeTag":"openTag";F.tokenize=u;return"tag bracket"}}}else{if(C=="&"){var E;if(G.eat("#")){if(G.eat("x")){E=G.eatWhile(/[a-fA-F\d]/)&&G.eat(";")}else{E=G.eatWhile(/[\d]/)&&G.eat(";")}}else{E=G.eatWhile(/[\w\.\-:]/)&&G.eat(";")}return E?"atom":"error"}else{G.eatWhile(/[^&<]/);return null}}}v.isInText=true;function u(F,E){var C=F.next();if(C==">"||(C=="/"&&F.eat(">"))){E.tokenize=v;B=C==">"?"endTag":"selfcloseTag";return"tag bracket"}else{if(C=="="){B="equals";return null}else{if(C=="<"){E.tokenize=v;E.state=h;E.tagName=E.tagStart=null;var D=E.tokenize(F,E);return D?D+" tag error":"tag error"}else{if(/[\'\"]/.test(C)){E.tokenize=r(C);E.stringStartCol=F.column();return E.tokenize(F,E)}else{F.match(/^[^\s\u00a0=<>\"\']*[^\s\u00a0=<>\"\'\/]/);return"word"}}}}}function r(D){var C=function(F,E){while(!F.eol()){if(F.next()==D){E.tokenize=u;break}}return"string"};C.isInAttribute=true;return C}function s(C,D){return function(F,E){while(!F.eol()){if(F.match(D)){E.tokenize=v;break}F.next()}return C}}function p(C){return function(F,E){var D;while((D=F.next())!=null){if(D=="<"){E.tokenize=p(C+1);return E.tokenize(F,E)}else{if(D==">"){if(C==1){E.tokenize=v;break}else{E.tokenize=p(C-1);return E.tokenize(F,E)}}}}return"meta"}}function n(D,E,C){this.prev=D.context;this.tagName=E;this.indent=D.indented;this.startOfLine=C;if(l.doNotIndent.hasOwnProperty(E)||(D.context&&D.context.noIndent)){this.noIndent=true}}function x(C){if(C.context){C.context=C.context.prev}}function w(E,C){var D;while(true){if(!E.context){return}D=E.context.tagName;if(!l.contextGrabbers.hasOwnProperty(D)||!l.contextGrabbers[D].hasOwnProperty(C)){return}x(E)}}function h(E,D,C){if(E=="openTag"){C.tagStart=D.column();return A}else{if(E=="closeTag"){return k}else{return h}}}function A(E,D,C){if(E=="word"){C.tagName=D.current();z="tag";return f}else{z="error";return A}}function k(F,D,C){if(F=="word"){var E=D.current();if(C.context&&C.context.tagName!=E&&l.implicitlyClosed.hasOwnProperty(C.context.tagName)){x(C)}if((C.context&&C.context.tagName==E)||l.matchClosing===false){z="tag";return i}else{z="tag error";return j}}else{z="error";return j}}function i(E,C,D){if(E!="endTag"){z="error";return i}x(D);return h}function j(E,D,C){z="error";return i(E,D,C)}function f(G,C,D){if(G=="word"){z="attribute";return e}else{if(G=="endTag"||G=="selfcloseTag"){var E=D.tagName,F=D.tagStart;D.tagName=D.tagStart=null;if(G=="selfcloseTag"||l.autoSelfClosers.hasOwnProperty(E)){w(D,E)}else{w(D,E);D.context=new n(D,E,F==D.indented)}return h}}z="error";return f}function e(E,D,C){if(E=="equals"){return g}if(!l.allowMissing){z="error"}return f(E,D,C)}function g(E,D,C){if(E=="string"){return d}if(E=="word"&&l.allowUnquoted){z="string";return f}z="error";return f(E,D,C)}function d(E,D,C){if(E=="string"){return d}return f(E,D,C)}return{startState:function(C){var D={tokenize:v,state:h,indented:C||0,tagName:null,tagStart:null,context:null};if(C!=null){D.baseIndent=C}return D},token:function(D,C){if(!C.tagName&&D.sol()){C.indented=D.indentation()}if(D.eatSpace()){return null}B=null;var E=C.tokenize(D,C);if((E||B)&&E!="comment"){z=null;C.state=C.state(B||E,D,C);if(z){E=z=="error"?E+" error":z}}return E},indent:function(F,H,D){var C=F.context;if(F.tokenize.isInAttribute){if(F.tagStart==F.indented){return F.stringStartCol+1}else{return F.indented+t}}if(C&&C.noIndent){return a.Pass}if(F.tokenize!=u&&F.tokenize!=v){return D?D.match(/^(\s*)/)[0].length:0}if(F.tagName){if(l.multilineTagIndentPastTag!==false){return F.tagStart+F.tagName.length+2}else{return F.tagStart+t*(l.multilineTagIndentFactor||1)}}if(l.alignCDATA&&/<!\[CDATA\[/.test(H)){return 0}var G=H&&/^<(\/)?([\w_:\.-]*)/.exec(H);if(G&&G[1]){while(C){if(C.tagName==G[2]){C=C.prev;break}else{if(l.implicitlyClosed.hasOwnProperty(C.tagName)){C=C.prev}else{break}}}}else{if(G){while(C){var E=l.contextGrabbers[C.tagName];if(E&&E.hasOwnProperty(G[2])){C=C.prev}else{break}}}}while(C&&C.prev&&!C.startOfLine){C=C.prev}if(C){return C.indent+t}else{return F.baseIndent||0}},electricInput:/<\/[\s\w:]+>$/,blockCommentStart:"<!--",blockCommentEnd:"-->",configuration:l.htmlMode?"html":"xml",helperType:l.htmlMode?"html":"xml",skipAttribute:function(C){if(C.state==g){C.state=f}}}});a.defineMIME("text/xml","xml");a.defineMIME("application/xml","xml");if(!a.mimeModes.hasOwnProperty("text/html")){a.defineMIME("text/html",{name:"xml",htmlMode:true})}});