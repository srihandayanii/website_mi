(function(a){if(typeof exports=="object"&&typeof module=="object"){a(require("../../lib/codemirror"))}else{if(typeof define=="function"&&define.amd){define(["../../lib/codemirror"],a)}else{a(CodeMirror)}}})(function(a){a.defineMode("xquery",function(){var i=function(){function E(A){return{type:A,style:"keyword"}}var u=E("keyword a"),x=E("keyword b"),z=E("keyword c"),H=E("operator"),v={type:"atom",style:"atom"},J={type:"punctuation",style:null},K={type:"axis_specifier",style:"qualifier"};var F={"if":u,"switch":u,"while":u,"for":u,"else":x,then:x,"try":x,"finally":x,"catch":x,element:z,attribute:z,let:z,"implements":z,"import":z,module:z,namespace:z,"return":z,"super":z,"this":z,"throws":z,where:z,"private":z,",":J,"null":v,"fn:false()":v,"fn:true()":v};var y=["after","ancestor","ancestor-or-self","and","as","ascending","assert","attribute","before","by","case","cast","child","comment","declare","default","define","descendant","descendant-or-self","descending","document","document-node","element","else","eq","every","except","external","following","following-sibling","follows","for","function","if","import","in","instance","intersect","item","let","module","namespace","node","node","of","only","or","order","parent","precedes","preceding","preceding-sibling","processing-instruction","ref","return","returns","satisfies","schema","schema-element","self","some","sortby","stable","text","then","to","treat","typeswitch","union","variable","version","where","xquery","empty-sequence"];for(var D=0,G=y.length;D<G;D++){F[y[D]]=E(y[D])}var L=["xs:string","xs:float","xs:decimal","xs:double","xs:integer","xs:boolean","xs:date","xs:dateTime","xs:time","xs:duration","xs:dayTimeDuration","xs:time","xs:yearMonthDuration","numeric","xs:hexBinary","xs:base64Binary","xs:anyURI","xs:QName","xs:byte","xs:boolean","xs:anyURI","xf:yearMonthDuration"];for(var D=0,G=L.length;D<G;D++){F[L[D]]=v}var I=["eq","ne","lt","le","gt","ge",":=","=",">",">=","<","<=",".","|","?","and","or","div","idiv","mod","*","/","+","-"];for(var D=0,G=I.length;D<G;D++){F[I[D]]=H}var w=["self::","attribute::","child::","descendant::","descendant-or-self::","parent::","ancestor::","ancestor-or-self::","following::","preceding::","following-sibling::","preceding-sibling::"];for(var D=0,G=w.length;D<G;D++){F[w[D]]=K}return F}();function b(w,v,u){v.tokenize=u;return u(w,v)}function m(C,B){var v=C.next(),A=false,y=c(C);if(v=="<"){if(C.match("!--",true)){return b(C,B,t)}if(C.match("![CDATA",false)){B.tokenize=n;return"tag"}if(C.match("?",false)){return b(C,B,p)}var x=C.eat("/");C.eatSpace();var D="",u;while((u=C.eat(/[^\s\u00a0=<>\"\'\/?]/))){D+=u}return b(C,B,r(D,x))}else{if(v=="{"){k(B,{type:"codeblock"});return null}else{if(v=="}"){j(B);return null}else{if(g(B)){if(v==">"){return"tag"}else{if(v=="/"&&C.eat(">")){j(B);return"tag"}else{return"variable"}}}else{if(/\d/.test(v)){C.match(/^\d*(?:\.\d*)?(?:E[+\-]?\d+)?/);return"atom"}else{if(v==="("&&C.eat(":")){k(B,{type:"comment"});return b(C,B,o)}else{if(!y&&(v==='"'||v==="'")){return b(C,B,q(v))}else{if(v==="$"){return b(C,B,s)}else{if(v===":"&&C.eat("=")){return"keyword"}else{if(v==="("){k(B,{type:"paren"});return null}else{if(v===")"){j(B);return null}else{if(v==="["){k(B,{type:"bracket"});return null}else{if(v==="]"){j(B);return null}else{var z=i.propertyIsEnumerable(v)&&i[v];if(y&&v==='"'){while(C.next()!=='"'){}}if(y&&v==="'"){while(C.next()!=="'"){}}if(!z){C.eatWhile(/[\w\$_-]/)}var w=C.eat(":");if(!C.eat(":")&&w){C.eatWhile(/[\w\$_-]/)}if(C.match(/^[ \t]*\(/,false)){A=true}var E=C.current();z=i.propertyIsEnumerable(E)&&i[E];if(A&&!z){z={type:"function_call",style:"variable def"}}if(h(B)){j(B);return"variable"}if(E=="element"||E=="attribute"||z.type=="axis_specifier"){k(B,{type:"xmlconstructor"})}return z?z.style:"variable"}}}}}}}}}}}}}}function o(z,y){var v=false,w=false,x=0,u;while(u=z.next()){if(u==")"&&v){if(x>0){x--}else{j(y);break}}else{if(u==":"&&w){x++}}v=(u==":");w=(u=="(")}return"comment"}function q(v,u){return function(y,x){var w;if(e(x)&&y.current()==v){j(x);if(u){x.tokenize=u}return"string"}k(x,{type:"string",name:v,tokenize:q(v,u)});if(y.match("{",false)&&f(x)){x.tokenize=m;return"string"}while(w=y.next()){if(w==v){j(x);if(u){x.tokenize=u}break}else{if(y.match("{",false)&&f(x)){x.tokenize=m;return"string"}}}return"string"}}function s(w,v){var u=/[\w\$_-]/;if(w.eat('"')){while(w.next()!=='"'){}w.eat(":")}else{w.eatWhile(u);if(!w.match(":=",false)){w.eat(":")}}w.eatWhile(u);v.tokenize=m;return"variable"}function r(v,u){return function(x,w){x.eatSpace();if(u&&x.eat(">")){j(w);w.tokenize=m;return"tag"}if(!x.eat("/")){k(w,{type:"tag",name:v,tokenize:m})}if(!x.eat(">")){w.tokenize=l;return"tag"}else{w.tokenize=m}return"tag"}}function l(w,v){var u=w.next();if(u=="/"&&w.eat(">")){if(f(v)){j(v)}if(g(v)){j(v)}return"tag"}if(u==">"){if(f(v)){j(v)}return"tag"}if(u=="="){return null}if(u=='"'||u=="'"){return b(w,v,q(u,l))}if(!f(v)){k(v,{type:"attribute",tokenize:l})}w.eat(/[a-zA-Z_:]/);w.eatWhile(/[-a-zA-Z0-9_:.]/);w.eatSpace();if(w.match(">",false)||w.match("/",false)){j(v);v.tokenize=m}return"attribute"}function t(w,v){var u;while(u=w.next()){if(u=="-"&&w.match("->",true)){v.tokenize=m;return"comment"}}}function n(w,v){var u;while(u=w.next()){if(u=="]"&&w.match("]",true)){v.tokenize=m;return"comment"}}}function p(w,v){var u;while(u=w.next()){if(u=="?"&&w.match(">",true)){v.tokenize=m;return"comment meta"}}}function g(u){return d(u,"tag")}function f(u){return d(u,"attribute")}function h(u){return d(u,"xmlconstructor")}function e(u){return d(u,"string")}function c(u){if(u.current()==='"'){return u.match(/^[^\"]+\"\:/,false)}else{if(u.current()==="'"){return u.match(/^[^\"]+\'\:/,false)}else{return false}}}function d(u,v){return(u.stack.length&&u.stack[u.stack.length-1].type==v)}function k(v,u){v.stack.push(u)}function j(v){v.stack.pop();var u=v.stack.length&&v.stack[v.stack.length-1].tokenize;v.tokenize=u||m}return{startState:function(){return{tokenize:m,cc:[],stack:[]}},token:function(v,u){if(v.eatSpace()){return null}var w=u.tokenize(v,u);return w},blockCommentStart:"(:",blockCommentEnd:":)"}});a.defineMIME("application/xquery","xquery")});