(function(a){if(typeof exports=="object"&&typeof module=="object"){a(require("../../lib/codemirror"))}else{if(typeof define=="function"&&define.amd){define(["../../lib/codemirror"],a)}else{a(CodeMirror)}}})(function(a){function f(h){return new RegExp("^(("+h.join(")|(")+"))\\b")}var e=f(["and","or","not","is"]);var c=["as","assert","break","class","continue","def","del","elif","else","except","finally","for","from","global","if","import","lambda","pass","raise","return","try","while","with","yield","in"];var b=["abs","all","any","bin","bool","bytearray","callable","chr","classmethod","compile","complex","delattr","dict","dir","divmod","enumerate","eval","filter","float","format","frozenset","getattr","globals","hasattr","hash","help","hex","id","input","int","isinstance","issubclass","iter","len","list","locals","map","max","memoryview","min","next","object","oct","open","ord","pow","property","range","repr","reversed","round","set","setattr","slice","sorted","staticmethod","str","sum","super","tuple","type","vars","zip","__import__","NotImplemented","Ellipsis","__debug__"];a.registerHelper("hintWords","python",c.concat(b));function d(h){return h.scopes[h.scopes.length-1]}a.defineMode("python",function(i,t){var m="error";var x=t.singleDelimiters||/^[\(\)\[\]\{\}@,:`=;\.]/;var l=t.doubleOperators||/^([!<>]==|<>|<<|>>|\/\/|\*\*)/;var k=t.doubleDelimiters||/^(\+=|\-=|\*=|%=|\/=|&=|\|=|\^=)/;var E=t.tripleDelimiters||/^(\/\/=|>>=|<<=|\*\*=)/;var o=t.hangingIndent||i.indentUnit;var s=c,r=b;if(t.extra_keywords!=undefined){s=s.concat(t.extra_keywords)}if(t.extra_builtins!=undefined){r=r.concat(t.extra_builtins)}var w=!(t.version&&Number(t.version)<3);if(w){var y=t.singleOperators||/^[\+\-\*\/%&|\^~<>!@]/;var p=t.identifiers||/^[_A-Za-z\u00A1-\uFFFF][_A-Za-z0-9\u00A1-\uFFFF]*/;s=s.concat(["nonlocal","False","True","None","async","await"]);r=r.concat(["ascii","bytes","exec","print"]);var z=new RegExp("^(([rbuf]|(br))?('{3}|\"{3}|['\"]))","i")}else{var y=t.singleOperators||/^[\+\-\*\/%&|\^~<>!]/;var p=t.identifiers||/^[_A-Za-z][_A-Za-z0-9]*/;s=s.concat(["exec","print"]);r=r.concat(["apply","basestring","buffer","cmp","coerce","execfile","file","intern","long","raw_input","reduce","reload","unichr","unicode","xrange","False","True","None"]);var z=new RegExp("^(([rub]|(ur)|(br))?('{3}|\"{3}|['\"]))","i")}var q=f(s);var h=f(r);function A(I,H){if(I.sol()){H.indent=I.indentation()}if(I.sol()&&d(H).type=="py"){var G=d(H).offset;if(I.eatSpace()){var F=I.indentation();if(F>G){v(H)}else{if(F<G&&j(I,H)){H.errorToken=true}}return null}else{var J=B(I,H);if(G>0&&j(I,H)){J+=" "+m}return J}}return B(I,H)}function B(J,I){if(J.eatSpace()){return null}var F=J.peek();if(F=="#"){J.skipToEnd();return"comment"}if(J.match(/^[0-9\.]/,false)){var G=false;if(J.match(/^\d*\.\d+(e[\+\-]?\d+)?/i)){G=true}if(J.match(/^\d+\.\d*/)){G=true}if(J.match(/^\.\d+/)){G=true}if(G){J.eat(/J/i);return"number"}var H=false;if(J.match(/^0x[0-9a-f]+/i)){H=true}if(J.match(/^0b[01]+/i)){H=true}if(J.match(/^0o[0-7]+/i)){H=true}if(J.match(/^[1-9]\d*(e[\+\-]?\d+)?/)){J.eat(/J/i);H=true}if(J.match(/^0(?![\dx])/i)){H=true}if(H){J.eat(/L/i);return"number"}}if(J.match(z)){I.tokenize=D(J.current());return I.tokenize(J,I)}if(J.match(E)||J.match(k)){return"punctuation"}if(J.match(l)||J.match(y)){return"operator"}if(J.match(x)){return"punctuation"}if(I.lastToken=="."&&J.match(p)){return"property"}if(J.match(q)||J.match(e)){return"keyword"}if(J.match(h)){return"builtin"}if(J.match(/^(self|cls)\b/)){return"variable-2"}if(J.match(p)){if(I.lastToken=="def"||I.lastToken=="class"){return"def"}return"variable"}J.next();return m}function D(F){while("rubf".indexOf(F.charAt(0).toLowerCase())>=0){F=F.substr(1)}var H=F.length==1;var G="string";function I(K,J){while(!K.eol()){K.eatWhile(/[^'"\\]/);if(K.eat("\\")){K.next();if(H&&K.eol()){return G}}else{if(K.match(F)){J.tokenize=A;return G}else{K.eat(/['"]/)}}}if(H){if(t.singleLineStringErrors){return m}else{J.tokenize=A}}return G}I.isString=true;return I}function v(F){while(d(F).type!="py"){F.scopes.pop()}F.scopes.push({offset:d(F).offset+i.indentUnit,type:"py",align:null})}function u(H,G,I){var F=H.match(/^([\s\[\{\(]|#.*)*$/,false)?null:H.column()+1;G.scopes.push({offset:G.indent+o,type:I,align:F})}function j(H,G){var F=H.indentation();while(G.scopes.length>1&&d(G).offset>F){if(d(G).type!="py"){return true}G.scopes.pop()}return d(G).offset!=F}function C(I,H){if(I.sol()){H.beginningOfLine=true}var J=H.tokenize(I,H);var F=I.current();if(H.beginningOfLine&&F=="@"){return I.match(p,false)?"meta":w?"operator":m}if(/\S/.test(F)){H.beginningOfLine=false}if((J=="variable"||J=="builtin")&&H.lastToken=="meta"){J="meta"}if(F=="pass"||F=="return"){H.dedent+=1}if(F=="lambda"){H.lambda=true}if(F==":"&&!H.lambda&&d(H).type=="py"){v(H)}var G=F.length==1?"[({".indexOf(F):-1;if(G!=-1){u(I,H,"])}".slice(G,G+1))}G="])}".indexOf(F);if(G!=-1){if(d(H).type==F){H.indent=H.scopes.pop().offset-o}else{return m}}if(H.dedent>0&&I.eol()&&d(H).type=="py"){if(H.scopes.length>1){H.scopes.pop()}H.dedent-=1}return J}var n={startState:function(F){return{tokenize:A,scopes:[{offset:F||0,type:"py",align:null}],indent:F||0,lastToken:null,lambda:false,dedent:0}},token:function(H,G){var F=G.errorToken;if(F){G.errorToken=false}var I=C(H,G);if(I&&I!="comment"){G.lastToken=(I=="keyword"||I=="punctuation")?H.current():I}if(I=="punctuation"){I=null}if(H.eol()&&G.lambda){G.lambda=false}return F?I+" "+m:I},indent:function(H,I){if(H.tokenize!=A){return H.tokenize.isString?a.Pass:0}var G=d(H),F=G.type==I.charAt(0);if(G.align!=null){return G.align-(F?1:0)}else{return G.offset-(F?o:0)}},electricInput:/^\s*[\}\]\)]$/,closeBrackets:{triples:"'\""},lineComment:"#",fold:"indent"};return n});a.defineMIME("text/x-python","python");var g=function(h){return h.split(" ")};a.defineMIME("text/x-cython",{name:"python",extra_keywords:g("by cdef cimport cpdef ctypedef enum exceptextern gil include nogil property publicreadonly struct union DEF IF ELIF ELSE")})});