(function(a){if(typeof exports=="object"&&typeof module=="object"){a(require("../../lib/codemirror"),require("../htmlmixed/htmlmixed"),require("../../addon/mode/overlay"))}else{if(typeof define=="function"&&define.amd){define(["../../lib/codemirror","../htmlmixed/htmlmixed","../../addon/mode/overlay"],a)}else{a(CodeMirror)}}})(function(a){a.defineMode("tornado:inner",function(){var c=["and","as","assert","autoescape","block","break","class","comment","context","continue","datetime","def","del","elif","else","end","escape","except","exec","extends","false","finally","for","from","global","if","import","in","include","is","json_encode","lambda","length","linkify","load","module","none","not","or","pass","print","put","raise","raw","return","self","set","squeeze","super","true","try","url_escape","while","with","without","xhtml_escape","yield"];c=new RegExp("^(("+c.join(")|(")+"))\\b");function d(g,f){g.eatWhile(/[^\{]/);var e=g.next();if(e=="{"){if(e=g.eat(/\{|%|#/)){f.tokenize=b(e);return"tag"}}}function b(e){if(e=="{"){e="}"}return function(h,g){var f=h.next();if((f==e)&&h.eat("}")){g.tokenize=d;return"tag"}if(h.match(c)){return"keyword"}return e=="#"?"comment":"string"}}return{startState:function(){return{tokenize:d}},token:function(f,e){return e.tokenize(f,e)}}});a.defineMode("tornado",function(b){var c=a.getMode(b,"text/html");var d=a.getMode(b,"tornado:inner");return a.overlayMode(c,d)});a.defineMIME("text/x-tornado","tornado")});