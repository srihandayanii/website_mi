(function(a){if(typeof exports=="object"&&typeof module=="object"){a(require("../../lib/codemirror"))}else{if(typeof define=="function"&&define.amd){define(["../../lib/codemirror"],a)}else{a(CodeMirror)}}})(function(a){a.defineMIME("text/x-erlang","erlang");a.defineMode("erlang",function(h){var O=["-type","-spec","-export_type","-opaque"];var t=["after","begin","catch","case","cond","end","fun","if","let","of","query","receive","try","when"];var J=/[\->,;]/;var K=["->",";",","];var A=["and","andalso","band","bnot","bor","bsl","bsr","bxor","div","not","or","orelse","rem","xor"];var B=/[\+\-\*\/<>=\|:!]/;var C=["=","+","-","*","/",">",">=","<","=<","=:=","==","=/=","/=","||","<-","!"];var y=/[<\(\[\{]/;var z=["<<","(","[","{"];var f=/[>\)\]\}]/;var g=["}","]",")",">>"];var q=["is_atom","is_binary","is_bitstring","is_boolean","is_float","is_function","is_integer","is_list","is_number","is_pid","is_port","is_record","is_reference","is_tuple","atom","binary","bitstring","boolean","function","integer","list","number","pid","port","record","reference","tuple"];var e=["abs","adler32","adler32_combine","alive","apply","atom_to_binary","atom_to_list","binary_to_atom","binary_to_existing_atom","binary_to_list","binary_to_term","bit_size","bitstring_to_list","byte_size","check_process_code","contact_binary","crc32","crc32_combine","date","decode_packet","delete_module","disconnect_node","element","erase","exit","float","float_to_list","garbage_collect","get","get_keys","group_leader","halt","hd","integer_to_list","internal_bif","iolist_size","iolist_to_binary","is_alive","is_atom","is_binary","is_bitstring","is_boolean","is_float","is_function","is_integer","is_list","is_number","is_pid","is_port","is_process_alive","is_record","is_reference","is_tuple","length","link","list_to_atom","list_to_binary","list_to_bitstring","list_to_existing_atom","list_to_float","list_to_integer","list_to_pid","list_to_tuple","load_module","make_ref","module_loaded","monitor_node","node","node_link","node_unlink","nodes","notalive","now","open_port","pid_to_list","port_close","port_command","port_connect","port_control","pre_loaded","process_flag","process_info","processes","purge_module","put","register","registered","round","self","setelement","size","spawn","spawn_link","spawn_monitor","spawn_opt","split_binary","statistics","term_to_binary","time","throw","tl","trunc","tuple_size","tuple_to_list","unlink","unregister","whereis"];var b=/[\w@Ø-ÞÀ-Öß-öø-ÿ]/;var l=/[0-7]{1,3}|[bdefnrstv\\"']|\^[a-zA-Z]|x[0-9a-zA-Z]{2}|x{[0-9a-zA-Z]+}/;function M(T,S){if(S.in_string){S.in_string=(!k(T));return I(S,T,"string")}if(S.in_atom){S.in_atom=(!L(T));return I(S,T,"atom")}if(T.eatSpace()){return I(S,T,"whitespace")}if(!D(S)&&T.match(/-\s*[a-zß-öø-ÿ][\wØ-ÞÀ-Öß-öø-ÿ]*/)){if(s(T.current(),O)){return I(S,T,"type")}else{return I(S,T,"attribute")}}var d=T.next();if(d=="%"){T.skipToEnd();return I(S,T,"comment")}if(d==":"){return I(S,T,"colon")}if(d=="?"){T.eatSpace();T.eatWhile(b);return I(S,T,"macro")}if(d=="#"){T.eatSpace();T.eatWhile(b);return I(S,T,"record")}if(d=="$"){if(T.next()=="\\"&&!T.match(l)){return I(S,T,"error")}return I(S,T,"number")}if(d=="."){return I(S,T,"dot")}if(d=="'"){if(!(S.in_atom=(!L(T)))){if(T.match(/\s*\/\s*[0-9]/,false)){T.match(/\s*\/\s*[0-9]/,true);return I(S,T,"fun")}if(T.match(/\s*\(/,false)||T.match(/\s*:/,false)){return I(S,T,"function")}}return I(S,T,"atom")}if(d=='"'){S.in_string=(!k(T));return I(S,T,"string")}if(/[A-Z_Ø-ÞÀ-Ö]/.test(d)){T.eatWhile(b);return I(S,T,"variable")}if(/[a-z_ß-öø-ÿ]/.test(d)){T.eatWhile(b);if(T.match(/\s*\/\s*[0-9]/,false)){T.match(/\s*\/\s*[0-9]/,true);return I(S,T,"fun")}var U=T.current();if(s(U,t)){return I(S,T,"keyword")}else{if(s(U,A)){return I(S,T,"operator")}else{if(T.match(/\s*\(/,false)){if(s(U,e)&&((D(S).token!=":")||(D(S,2).token=="erlang"))){return I(S,T,"builtin")}else{if(s(U,q)){return I(S,T,"guard")}else{return I(S,T,"function")}}}else{if(u(T)==":"){if(U=="erlang"){return I(S,T,"builtin")}else{return I(S,T,"function")}}else{if(s(U,["true","false"])){return I(S,T,"boolean")}else{return I(S,T,"atom")}}}}}}var Q=/[0-9]/;var R=/[0-9a-zA-Z]/;if(Q.test(d)){T.eatWhile(Q);if(T.eat("#")){if(!T.eatWhile(R)){T.backUp(1)}}else{if(T.eat(".")){if(!T.eatWhile(Q)){T.backUp(1)}else{if(T.eat(/[eE]/)){if(T.eat(/[-+]/)){if(!T.eatWhile(Q)){T.backUp(2)}}else{if(!T.eatWhile(Q)){T.backUp(1)}}}}}}return I(S,T,"number")}if(x(T,y,z)){return I(S,T,"open_paren")}if(x(T,f,g)){return I(S,T,"close_paren")}if(p(T,J,K)){return I(S,T,"separator")}if(p(T,B,C)){return I(S,T,"operator")}return I(S,T,null)}function x(Q,d,R){if(Q.current().length==1&&d.test(Q.current())){Q.backUp(1);while(d.test(Q.peek())){Q.next();if(s(Q.current(),R)){return true}}Q.backUp(Q.current().length-1)}return false}function p(Q,d,R){if(Q.current().length==1&&d.test(Q.current())){while(d.test(Q.peek())){Q.next()}while(0<Q.current().length){if(s(Q.current(),R)){return true}else{Q.backUp(1)}}Q.next()}return false}function k(d){return G(d,'"',"\\")}function L(d){return G(d,"'","\\")}function G(S,R,Q){while(!S.eol()){var d=S.next();if(d==R){return true}else{if(d==Q){S.next()}}}return false}function u(Q){var d=Q.match(/([\n\s]+|%[^\n]*\n)*(.)/,false);return d?d.pop():""}function s(d,Q){return(-1<Q.indexOf(d))}function I(d,Q,R){F(d,H(R,Q));switch(R){case"atom":return"atom";case"attribute":return"attribute";case"boolean":return"atom";case"builtin":return"builtin";case"close_paren":return null;case"colon":return null;case"comment":return"comment";case"dot":return null;case"error":return"error";case"fun":return"meta";case"function":return"tag";case"guard":return"property";case"keyword":return"keyword";case"macro":return"variable-2";case"number":return"number";case"open_paren":return null;case"operator":return"operator";case"record":return"bracket";case"separator":return null;case"string":return"string";case"type":return"def";case"variable":return"variable";default:return null}}function c(R,d,Q,S){return{token:R,column:d,indent:Q,type:S}}function H(Q,d){return c(d.current(),d.column(),d.indentation(),Q)}function m(d){return c(d,0,0,d)}function D(S,Q){var R=S.tokenStack.length;var d=(Q?Q:1);if(R<d){return false}else{return S.tokenStack[R-d]}}function F(d,Q){if(!(Q.type=="comment"||Q.type=="whitespace")){d.tokenStack=w(d.tokenStack,Q);d.tokenStack=v(d.tokenStack)}}function w(Q,R){var d=Q.length-1;if(0<d&&Q[d].type==="record"&&R.type==="dot"){Q.pop()}else{if(0<d&&Q[d].type==="group"){Q.pop();Q.push(R)}else{Q.push(R)}}return Q}function v(Q){var d=Q.length-1;if(Q[d].type==="dot"){return[]}if(Q[d].type==="fun"&&Q[d-1].token==="fun"){return Q.slice(0,d-1)}switch(Q[Q.length-1].token){case"}":return i(Q,{g:["{"]});case"]":return i(Q,{i:["["]});case")":return i(Q,{i:["("]});case">>":return i(Q,{i:["<<"]});case"end":return i(Q,{i:["begin","case","fun","if","receive","try"]});case",":return i(Q,{e:["begin","try","when","->",",","(","[","{","<<"]});case"->":return i(Q,{r:["when"],m:["try","if","case","receive"]});case";":return i(Q,{E:["case","fun","if","receive","try","when"]});case"catch":return i(Q,{e:["try"]});case"of":return i(Q,{e:["case"]});case"after":return i(Q,{e:["receive","try"]});default:return Q}}function i(S,U){for(var V in U){var Q=S.length-1;var T=U[V];for(var d=Q-1;-1<d;d--){if(s(S[d].token,T)){var R=S.slice(0,d);switch(V){case"m":return R.concat(S[d]).concat(S[Q]);case"r":return R.concat(S[Q]);case"i":return R;case"g":return R.concat(m("group"));case"E":return R.concat(S[d]);case"e":return R.concat(S[d])}}}}return(V=="E"?[]:S)}function r(R,T){var S;var U=h.indentUnit;var V=P(T);var d=D(R,1);var Q=D(R,2);if(R.in_string||R.in_atom){return a.Pass}else{if(!Q){return 0}else{if(d.token=="when"){return d.column+U}else{if(V==="when"&&Q.type==="function"){return Q.indent+U}else{if(V==="("&&d.token==="fun"){return d.column+3}else{if(V==="catch"&&(S=n(R,["try"]))){return S.column}else{if(s(V,["end","after","of"])){S=n(R,["begin","case","fun","if","receive","try"]);return S?S.column:a.Pass}else{if(s(V,g)){S=n(R,z);return S?S.column:a.Pass}else{if(s(d.token,[",","|","||"])||s(V,[",","|","||"])){S=E(R);return S?S.column+S.token.length:U}else{if(d.token=="->"){if(s(Q.token,["receive","case","if","try"])){return Q.column+U+U}else{return Q.column+U}}else{if(s(d.token,z)){return d.column+d.token.length}else{S=j(R);return N(S)?S.column+U:0}}}}}}}}}}}}function P(Q){var d=Q.match(/,|[a-z]+|\}|\]|\)|>>|\|+|\(/);return N(d)&&(d.index===0)?d[0]:""}function E(R){var Q=R.tokenStack.slice(0,-1);var d=o(Q,"type",["open_paren"]);return N(Q[d])?Q[d]:false}function j(R){var d=R.tokenStack;var S=o(d,"type",["open_paren","separator","keyword"]);var Q=o(d,"type",["operator"]);if(N(S)&&N(Q)&&S<Q){return d[S+1]}else{if(N(S)){return d[S]}else{return false}}}function n(R,S){var Q=R.tokenStack;var d=o(Q,"token",S);return N(Q[d])?Q[d]:false}function o(Q,R,S){for(var d=Q.length-1;-1<d;d--){if(s(Q[d][R],S)){return d}}return false}function N(d){return(d!==false)&&(d!=null)}return{startState:function(){return{tokenStack:[],in_string:false,in_atom:false}},token:function(Q,d){return M(Q,d)},indent:function(d,Q){return r(d,Q)},lineComment:"%"}})});