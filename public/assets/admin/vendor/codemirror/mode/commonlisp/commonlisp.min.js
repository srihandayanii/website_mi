(function(a){if(typeof exports=="object"&&typeof module=="object"){a(require("../../lib/codemirror"))}else{if(typeof define=="function"&&define.amd){define(["../../lib/codemirror"],a)}else{a(CodeMirror)}}})(function(a){a.defineMode("commonlisp",function(d){var i=/^(block|let*|return-from|catch|load-time-value|setq|eval-when|locally|symbol-macrolet|flet|macrolet|tagbody|function|multiple-value-call|the|go|multiple-value-prog1|throw|if|progn|unwind-protect|labels|progv|let|quote)$/;var b=/^with|^def|^do|^prog|case$|^cond$|bind$|when$|unless$/;var g=/^(?:[+\-]?(?:\d+|\d*\.\d+)(?:[efd][+\-]?\d+)?|[+\-]?\d+(?:\/[+\-]?\d+)?|#b[+\-]?[01]+|#o[+\-]?[0-7]+|#x[+\-]?[\da-f]+)/;var j=/[^\s'`,@()\[\]";]/;var k;function h(m){var l;while(l=m.next()){if(l=="\\"){m.next()}else{if(!j.test(l)){m.backUp(1);break}}}return m.current()}function c(o,n){if(o.eatSpace()){k="ws";return null}if(o.match(g)){return"number"}var l=o.next();if(l=="\\"){l=o.next()}if(l=='"'){return(n.tokenize=f)(o,n)}else{if(l=="("){k="open";return"bracket"}else{if(l==")"||l=="]"){k="close";return"bracket"}else{if(l==";"){o.skipToEnd();k="ws";return"comment"}else{if(/['`,@]/.test(l)){return null}else{if(l=="|"){if(o.skipTo("|")){o.next();return"symbol"}else{o.skipToEnd();return"error"}}else{if(l=="#"){var l=o.next();if(l=="["){k="open";return"bracket"}else{if(/[+\-=\.']/.test(l)){return null}else{if(/\d/.test(l)&&o.match(/^\d*#/)){return null}else{if(l=="|"){return(n.tokenize=e)(o,n)}else{if(l==":"){h(o);return"meta"}else{return"error"}}}}}}else{var m=h(o);if(m=="."){return null}k="symbol";if(m=="nil"||m=="t"||m.charAt(0)==":"){return"atom"}if(n.lastType=="open"&&(i.test(m)||b.test(m))){return"keyword"}if(m.charAt(0)=="&"){return"variable-2"}return"variable"}}}}}}}}function f(o,n){var l=false,m;while(m=o.next()){if(m=='"'&&!l){n.tokenize=c;break}l=!l&&m=="\\"}return"string"}function e(o,n){var m,l;while(m=o.next()){if(m=="#"&&l=="|"){n.tokenize=c;break}l=m}k="ws";return"comment"}return{startState:function(){return{ctx:{prev:null,start:0,indentTo:0},lastType:null,tokenize:c}},token:function(m,l){if(m.sol()&&typeof l.ctx.indentTo!="number"){l.ctx.indentTo=l.ctx.start+1}k=null;var n=l.tokenize(m,l);if(k!="ws"){if(l.ctx.indentTo==null){if(k=="symbol"&&b.test(m.current())){l.ctx.indentTo=l.ctx.start+d.indentUnit}else{l.ctx.indentTo="next"}}else{if(l.ctx.indentTo=="next"){l.ctx.indentTo=m.column()}}l.lastType=k}if(k=="open"){l.ctx={prev:l.ctx,start:m.column(),indentTo:null}}else{if(k=="close"){l.ctx=l.ctx.prev||l.ctx}}return n},indent:function(n,l){var m=n.ctx.indentTo;return typeof m=="number"?m:n.ctx.start+1},closeBrackets:{pairs:'()[]{}""'},lineComment:";;",blockCommentStart:"#|",blockCommentEnd:"|#"}});a.defineMIME("text/x-common-lisp","commonlisp")});