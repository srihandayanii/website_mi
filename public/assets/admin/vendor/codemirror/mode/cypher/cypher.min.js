(function(a){if(typeof exports=="object"&&typeof module=="object"){a(require("../../lib/codemirror"))}else{if(typeof define=="function"&&define.amd){define(["../../lib/codemirror"],a)}else{a(CodeMirror)}}})(function(a){var b=function(c){return new RegExp("^(?:"+c.join("|")+")$","i")};a.defineMode("cypher",function(c){var l=function(n){var m=n.next();if(m==='"'||m==="'"){n.match(/.+?["']/);return"string"}if(/[{}\(\),\.;\[\]]/.test(m)){d=m;return"node"}else{if(m==="/"&&n.eat("/")){n.skipToEnd();return"comment"}else{if(h.test(m)){n.eatWhile(h);return null}else{n.eatWhile(/[_\w\d]/);if(n.eat(":")){n.eatWhile(/[\w\d_\-]/);return"atom"}var o=n.current();if(e.test(o)){return"builtin"}if(j.test(o)){return"def"}if(g.test(o)){return"keyword"}return"variable"}}}};var k=function(n,o,m){return n.context={prev:n.context,indent:n.indent,col:m,type:o}};var i=function(m){m.indent=m.context.indent;return m.context=m.context.prev};var f=c.indentUnit;var d;var e=b(["abs","acos","allShortestPaths","asin","atan","atan2","avg","ceil","coalesce","collect","cos","cot","count","degrees","e","endnode","exp","extract","filter","floor","haversin","head","id","keys","labels","last","left","length","log","log10","lower","ltrim","max","min","node","nodes","percentileCont","percentileDisc","pi","radians","rand","range","reduce","rel","relationship","relationships","replace","reverse","right","round","rtrim","shortestPath","sign","sin","size","split","sqrt","startnode","stdev","stdevp","str","substring","sum","tail","tan","timestamp","toFloat","toInt","toString","trim","type","upper"]);var j=b(["all","and","any","contains","exists","has","in","none","not","or","single","xor"]);var g=b(["as","asc","ascending","assert","by","case","commit","constraint","create","csv","cypher","delete","desc","descending","detach","distinct","drop","else","end","ends","explain","false","fieldterminator","foreach","from","headers","in","index","is","join","limit","load","match","merge","null","on","optional","order","periodic","profile","remove","return","scan","set","skip","start","starts","then","true","union","unique","unwind","using","when","where","with"]);var h=/[*+\-<>=&|~%^]/;return{startState:function(){return{tokenize:l,context:null,indent:0,col:0}},token:function(n,m){if(n.sol()){if(m.context&&(m.context.align==null)){m.context.align=false}m.indent=n.indentation()}if(n.eatSpace()){return null}var o=m.tokenize(n,m);if(o!=="comment"&&m.context&&(m.context.align==null)&&m.context.type!=="pattern"){m.context.align=true}if(d==="("){k(m,")",n.column())}else{if(d==="["){k(m,"]",n.column())}else{if(d==="{"){k(m,"}",n.column())}else{if(/[\]\}\)]/.test(d)){while(m.context&&m.context.type==="pattern"){i(m)}if(m.context&&d===m.context.type){i(m)}}else{if(d==="."&&m.context&&m.context.type==="pattern"){i(m)}else{if(/atom|string|variable/.test(o)&&m.context){if(/[\}\]]/.test(m.context.type)){k(m,"pattern",n.column())}else{if(m.context.type==="pattern"&&!m.context.align){m.context.align=true;m.context.col=n.column()}}}}}}}}return o},indent:function(p,q){var o=q&&q.charAt(0);var n=p.context;if(/[\]\}]/.test(o)){while(n&&n.type==="pattern"){n=n.prev}}var m=n&&o===n.type;if(!n){return 0}if(n.type==="keywords"){return a.commands.newlineAndIndent}if(n.align){return n.col+(m?0:1)}return n.indent+(m?0:f)}}});a.modeExtensions.cypher={autoFormatLineBreaks:function(f){var c,d,e;var d=f.split("\n");var e=/\s+\b(return|where|order by|match|with|skip|limit|create|delete|set)\b\s/g;for(var c=0;c<d.length;c++){d[c]=d[c].replace(e," \n$1 ").trim()}return d.join("\n")}};a.defineMIME("application/x-cypher-query","cypher")});