(function(a){if(typeof exports=="object"&&typeof module=="object"){a(require("../../lib/codemirror"))}else{if(typeof define=="function"&&define.amd){define(["../../lib/codemirror"],a)}else{a(CodeMirror)}}})(function(a){a.defineMode("ebnf",function(d){var c={slash:0,parenthesis:1};var e={comment:0,_string:1,characterClass:2};var b=null;if(d.bracesMode){b=a.getMode(d,d.bracesMode)}return{startState:function(){return{stringType:null,commentType:null,braced:0,lhs:true,localState:null,stack:[],inDefinition:false}},token:function(j,h){if(!j){return}if(h.stack.length===0){if((j.peek()=='"')||(j.peek()=="'")){h.stringType=j.peek();j.next();h.stack.unshift(e._string)}else{if(j.match(/^\/\*/)){h.stack.unshift(e.comment);h.commentType=c.slash}else{if(j.match(/^\(\*/)){h.stack.unshift(e.comment);h.commentType=c.parenthesis}}}}switch(h.stack[0]){case e._string:while(h.stack[0]===e._string&&!j.eol()){if(j.peek()===h.stringType){j.next();h.stack.shift()}else{if(j.peek()==="\\"){j.next();j.next()}else{j.match(/^.[^\\\"\']*/)}}}return h.lhs?"property string":"string";case e.comment:while(h.stack[0]===e.comment&&!j.eol()){if(h.commentType===c.slash&&j.match(/\*\//)){h.stack.shift();h.commentType=null}else{if(h.commentType===c.parenthesis&&j.match(/\*\)/)){h.stack.shift();h.commentType=null}else{j.match(/^.[^\*]*/)}}}return"comment";case e.characterClass:while(h.stack[0]===e.characterClass&&!j.eol()){if(!(j.match(/^[^\]\\]+/)||j.match(/^\\./))){h.stack.shift()}}return"operator"}var g=j.peek();if(b!==null&&(h.braced||g==="{")){if(h.localState===null){h.localState=a.startState(b)}var l=b.token(j,h.localState),k=j.current();if(!l){for(var f=0;f<k.length;f++){if(k[f]==="{"){if(h.braced===0){l="matchingbracket"}h.braced++}else{if(k[f]==="}"){h.braced--;if(h.braced===0){l="matchingbracket"}}}}}return l}switch(g){case"[":j.next();h.stack.unshift(e.characterClass);return"bracket";case":":case"|":case";":j.next();return"operator";case"%":if(j.match("%%")){return"header"}else{if(j.match(/[%][A-Za-z]+/)){return"keyword"}else{if(j.match(/[%][}]/)){return"matchingbracket"}}}break;case"/":if(j.match(/[\/][A-Za-z]+/)){return"keyword"}case"\\":if(j.match(/[\][a-z]+/)){return"string-2"}case".":if(j.match(".")){return"atom"}case"*":case"-":case"+":case"^":if(j.match(g)){return"atom"}case"$":if(j.match("$$")){return"builtin"}else{if(j.match(/[$][0-9]+/)){return"variable-3"}}case"<":if(j.match(/<<[a-zA-Z_]+>>/)){return"builtin"}}if(j.match(/^\/\//)){j.skipToEnd();return"comment"}else{if(j.match(/return/)){return"operator"}else{if(j.match(/^[a-zA-Z_][a-zA-Z0-9_]*/)){if(j.match(/(?=[\(.])/)){return"variable"}else{if(j.match(/(?=[\s\n]*[:=])/)){return"def"}}return"variable-2"}else{if(["[","]","(",")"].indexOf(j.peek())!=-1){j.next();return"bracket"}else{if(!j.eatSpace()){j.next()}}}}}return null}}});a.defineMIME("text/x-ebnf","ebnf")});