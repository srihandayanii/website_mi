(function(a){if(typeof exports=="object"&&typeof module=="object"){a(require("../../lib/codemirror"))}else{if(typeof define=="function"&&define.amd){define(["../../lib/codemirror"],a)}else{a(CodeMirror)}}})(function(b){var f=["From","Sender","Reply-To","To","Cc","Bcc","Message-ID","In-Reply-To","References","Resent-From","Resent-Sender","Resent-To","Resent-Cc","Resent-Bcc","Resent-Message-ID","Return-Path","Received"];var i=["Date","Subject","Comments","Keywords","Resent-Date"];b.registerHelper("hintWords","mbox",f.concat(i));var n=/^[ \t]/;var j=/^From /;var g=new RegExp("^("+f.join("|")+"): ");var h=new RegExp("^("+i.join("|")+"): ");var d=/^[^:]+:/;var c=/^[^ ]+@[^ ]+/;var m=/^.*?(?=[^ ]+?@[^ ]+)/;var a=/^<.*?>/;var l=/^.*?(?=<.*>)/;function k(o){if(o==="Subject"){return"header"}return"string"}function e(r,q){if(r.sol()){q.inSeparator=false;if(q.inHeader&&r.match(n)){return null}else{q.inHeader=false;q.header=null}if(r.match(j)){q.inHeaders=true;q.inSeparator=true;return"atom"}var p;var o=false;if((p=r.match(h))||(o=true)&&(p=r.match(g))){q.inHeaders=true;q.inHeader=true;q.emailPermitted=o;q.header=p[1];return"atom"}if(q.inHeaders&&(p=r.match(d))){q.inHeader=true;q.emailPermitted=true;q.header=p[1];return"atom"}q.inHeaders=false;r.skipToEnd();return null}if(q.inSeparator){if(r.match(c)){return"link"}if(r.match(m)){return"atom"}r.skipToEnd();return"atom"}if(q.inHeader){var s=k(q.header);if(q.emailPermitted){if(r.match(a)){return s+" link"}if(r.match(l)){return s}}r.skipToEnd();return s}r.skipToEnd();return null}b.defineMode("mbox",function(){return{startState:function(){return{inSeparator:false,inHeader:false,emailPermitted:false,header:null,inHeaders:false}},token:e,blankLine:function(o){o.inHeaders=o.inSeparator=o.inHeader=false}}});b.defineMIME("application/mbox","mbox")});