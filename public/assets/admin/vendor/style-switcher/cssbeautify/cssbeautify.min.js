(function(){function a(x,r){var s,k=0,o=x.length,d,j="",e,f,w,u,v,i,t,h,q=true,c=false,y;s=arguments.length>1?r:{};if(typeof s.indent==="undefined"){s.indent="    "}if(typeof s.openbrace==="string"){q=(s.openbrace==="end-of-line")}if(typeof s.autosemicolon==="boolean"){c=s.autosemicolon}function n(z){return(z===" ")||(z==="\n")||(z==="\t")||(z==="\r")||(z==="\f")}function m(z){return(z==="'")||(z==='"')}function l(z){return(e>="a"&&e<="z")||(e>="A"&&e<="Z")||(e>="0"&&e<="9")||"-_*.:#".indexOf(z)>=0}function b(){var z;for(z=i;z>0;z-=1){j+=s.indent}}function p(){j=y(j);if(q){j+=" {"}else{j+="\n";b();j+="{"}if(f!=="\n"){j+="\n"}i+=1}function g(){i-=1;j=y(j);if(c){if(j.charAt(j.length-1)!==";"){j+=";"}}j+="\n";b();j+="}";d.push(j);j=""}if(String.prototype.trimRight){y=function(z){return z.trimRight()}}else{y=function(z){return z.replace(/\s+$/,"")}}v={Start:0,AtRule:1,Block:2,Selector:3,Ruleset:4,Property:5,Separator:6,Expression:7,URL:8};i=0;u=v.Start;h=false;d=[];x=x.replace(/\r\n/g,"\n");while(k<o){e=x.charAt(k);f=x.charAt(k+1);k+=1;if(m(t)){j+=e;if(e===t){t=null}if(e==="\\"&&f===t){j+=f;k+=1}continue}if(m(e)){j+=e;t=e;continue}if(h){j+=e;if(e==="*"&&f==="/"){h=false;j+=f;k+=1}continue}else{if(e==="/"&&f==="*"){h=true;j+=e;j+=f;k+=1;continue}}if(u===v.Start){if(d.length===0){if(n(e)&&j.length===0){continue}}if(e<=" "||e.charCodeAt(0)>=128){u=v.Start;j+=e;continue}if(l(e)||(e==="@")){w=y(j);if(w.length===0){if(d.length>0){j="\n\n"}}else{if(w.charAt(w.length-1)==="}"||w.charAt(w.length-1)===";"){j=w+"\n\n"}else{while(true){f=j.charAt(j.length-1);if(f!==" "&&f.charCodeAt(0)!==9){break}j=j.substr(0,j.length-1)}}}j+=e;u=(e==="@")?v.AtRule:v.Selector;continue}}if(u===v.AtRule){if(e===";"){j+=e;u=v.Start;continue}if(e==="{"){p();u=v.Block;continue}j+=e;continue}if(u===v.Block){if(l(e)){w=y(j);if(w.length===0){if(d.length>0){j="\n\n"}}else{if(w.charAt(w.length-1)==="}"){j=w+"\n\n"}else{while(true){f=j.charAt(j.length-1);if(f!==" "&&f.charCodeAt(0)!==9){break}j=j.substr(0,j.length-1)}}}b();j+=e;u=v.Selector;continue}if(e==="}"){g();u=v.Start;continue}j+=e;continue}if(u===v.Selector){if(e==="{"){p();u=v.Ruleset;continue}if(e==="}"){g();u=v.Start;continue}j+=e;continue}if(u===v.Ruleset){if(e==="}"){g();u=v.Start;if(i>0){u=v.Block}continue}if(e==="\n"){j=y(j);j+="\n";continue}if(!n(e)){j=y(j);j+="\n";b();j+=e;u=v.Property;continue}j+=e;continue}if(u===v.Property){if(e===":"){j=y(j);j+=": ";u=v.Expression;if(n(f)){u=v.Separator}continue}if(e==="}"){g();u=v.Start;if(i>0){u=v.Block}continue}j+=e;continue}if(u===v.Separator){if(!n(e)){j+=e;u=v.Expression;continue}if(m(f)){u=v.Expression}continue}if(u===v.Expression){if(e==="}"){g();u=v.Start;if(i>0){u=v.Block}continue}if(e===";"){j=y(j);j+=";\n";u=v.Ruleset;continue}j+=e;if(e==="("){if(j.charAt(j.length-2)==="l"&&j.charAt(j.length-3)==="r"&&j.charAt(j.length-4)==="u"){u=v.URL;continue}}continue}if(u===v.URL){if(e===")"&&j.charAt(j.length-1!=="\\")){j+=e;u=v.Expression;continue}}j+=e}j=d.join("")+j;return j}if(typeof exports!=="undefined"){module.exports=exports=a}else{if(typeof window==="object"){window.cssbeautify=a}}}());