(function(a){var b={shape:"circle",color:"#82BF41",background:"#4C4C52",stroke:"#23282F",textColor:"#FFFFFF",fontFamily:"Open Sans",fontSize:"24px",fontWeight:"600",liquidOpacity:0.9,liquidPalette:["#82BF41"],speed:3000,animate:true};var d=function(e,f){if(typeof Snap=="undefined"){throw"Snap.js not found."}this.meter=a(e);this.options=f;this.options.text=this.meter.text();this.init()};d.prototype={init:function(e,f){this.wrapper=this.meter.parent(".liquid-meter");if(!this.wrapper.get(0)){var h=a("<div>").attr({"class":"liquid-meter"});this.wrapper=this.meter.wrap(h).parent()}var g=document.createElementNS("http://www.w3.org/2000/svg","svg");g.setAttribute("preserveAspectRatio","xMidYMid meet");g.setAttribute("viewBox","0 0 220 220");this.wrapper.prepend(g);this.svg=a(g).attr({width:"100%",height:"100%"});this.frames=[[6,-6,-10,6,13,-10],[6,-5,-13,4,31,-5],[7,-5,-9,0,31,-5],[7,-5,-9,-6,30,-6],[6,-10,-10,-10,33,-4],[8,-4,-8,-13,38,7],[8,-8,-5,-15,55,11],[7,-19,-2,-16,33,16],[3,-23,-2,-16,42,21],[3,-22,7,-18,27,21],[2,-26,15,-18,25,20],[-3,-23,18,-18,26,19],[-6,-40,18,-18,22,22],[-15,-16,23,-13,37,22],[-15,-16,23,-13,37,22],[-17,-16,23,-10,33,22],[-18,-16,23,-10,35,21],[-20,-12,23,-5,34,20],[-22,-13,20,-1,35,22],[-22,-13,20,5,32,21],[-21,-16,19,8,34,15],[-23,-16,16,10,36,9],[-22,-23,13,10,48,0],[-23,-20,13,8,45,-6],[-20,-22,7,10,44,-6],[-20,-22,5,10,42,-7],[-18,-20,0,10,41,-8],[-15,-22,-7,10,41,-8],[-11,-33,-8,10,41,-8],[-7,-36,-6,10,15,-11],[0,-39,-8,10,15,-11],[0,-36,-8,7,15,-11],];this.paper=Snap(g);this.draw();this.observe();if(this.options.animate){this.animate()}else{this.drawFrame(1)}this.wrapper.addClass("liquid-meter-loaded");return this},draw:function(){this.value=parseInt(this.meter.val()||this.meter.attr("value"),10);var g=this.paper;this.recipient=g.circle(110,110,95);var e=this.makeGradient(this.options.background);this.recipient.attr({fill:e,stroke:this.options.stroke,strokeWidth:15});var f=g.circle(110,110,87);f.attr({fill:"#FFFFFF"});this.liquid=g.path();this.liquid.attr({id:"front",fill:this.options.color,mask:f,stroke:c(this.options.color,20),strokeWidth:1});this.label=g.text("50%","50%",[this.value,"%"]);this.label.attr({fill:this.options.textColor,dy:".4em","font-family":this.options.fontFamily,"font-size":this.options.fontSize,"font-weight":this.options.fontWeight,"text-anchor":"middle",stroke:this.options.textColor});this.label.selectAll("tspan:nth-child(2)").attr({"font-size":"24",stroke:"none"});return this},observe:function(){var e=this;this.meter.on("change",function(){e.set(a(this).val())})},set:function(e){var f=parseInt(e,10);this.meter.val(f);this.value=f;this.label.node.textContent=f+"%"},liquidPalette:function(e){this.options.liquidPalette=e},background:function(e){this.options.background=e},stroke:function(e){this.options.stroke=e},color:function(e){this.options.color=e;this.liquid.attr({fill:this.options.color,stroke:c(this.options.color,20)})},makeGradient:function(e){return this.paper.gradient(Snap.format("L(0, 0, 100, 100){color.top}-{color.bottom}",{color:{top:c(e,6),bottom:e}}))},makePath:function(h,e,i,k,f,j,l){var g=((100-h)*1.76)+22;return Snap.format("M0,{left} C{curve.x1},{curve.y1} {curve.x2},{curve.y2} 220,{right} L220,220 L0,220 z",{left:g-(e||0),right:g-(f||0),curve:{x1:i+g,y1:k+g,x2:j+g,y2:l+g}})},drawFrame:function(f){var e=this.frames[f-1],g=e[0],i=e[1],k=e[2],h=e[3],j=e[4],l=e[5];this.liquid.attr({d:this.makePath(this.value,g,i,k,h,j,l)})},animate:function(){var k=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(l){setTimeout(l,0)},h=this.frames.length,i=this.options.speed/h,e=1,g=this.drawFrame.bind(this);function j(){k(function(){f()});setTimeout(j,i)}function f(){g(e);e++;if(e>=h){e=1}}j();return this}};a.fn.liquidMeter=function(f,g){var e=(typeof f==="string"&&!!g);if(!e){f=a.extend({},b,f)}return this.map(function(){var h=a(this).data("liquid-meter");if(!h){h=new d(this,f);a(this).data("liquid-meter",h)}if(e){h[f](g)}return h})};function c(h,k){var j=parseInt(h.slice(1),16),e=Math.round(2.55*k||0),l=(j>>16)+e,f=(j>>8&255)+e,i=(j&255)+e;return"#"+(16777216+(l<255?l<1?0:l:255)*65536+(f<255?f<1?0:f:255)*256+(i<255?i<1?0:i:255)).toString(16).slice(1).toUpperCase()}}(jQuery));