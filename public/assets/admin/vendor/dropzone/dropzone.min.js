(function(){var h,i,d,e,f,g,j,k,c=[].slice,b={}.hasOwnProperty,a=function(l,o){for(var n in o){if(b.call(o,n)){l[n]=o[n]}}function m(){this.constructor=l}m.prototype=o.prototype;l.prototype=new m();l.__super__=o.prototype;return l};j=function(){};i=(function(){function l(){}l.prototype.addEventListener=l.prototype.on;l.prototype.on=function(m,n){this._callbacks=this._callbacks||{};if(!this._callbacks[m]){this._callbacks[m]=[]}this._callbacks[m].push(n);return this};l.prototype.emit=function(){var o,p,q,r,m,n;r=arguments[0],o=2<=arguments.length?c.call(arguments,1):[];this._callbacks=this._callbacks||{};q=this._callbacks[r];if(q){for(m=0,n=q.length;m<n;m++){p=q[m];p.apply(this,o)}}return this};l.prototype.removeListener=l.prototype.off;l.prototype.removeAllListeners=l.prototype.off;l.prototype.removeEventListener=l.prototype.off;l.prototype.off=function(q,r){var o,p,s,m,n;if(!this._callbacks||arguments.length===0){this._callbacks={};return this}p=this._callbacks[q];if(!p){return this}if(arguments.length===1){delete this._callbacks[q];return this}for(s=m=0,n=p.length;m<n;s=++m){o=p[s];if(o===r){p.splice(s,1);break}}return this};return l})();h=(function(l){var n,o;a(m,l);m.prototype.Emitter=i;m.prototype.events=["drop","dragstart","dragend","dragenter","dragover","dragleave","addedfile","addedfiles","removedfile","thumbnail","error","errormultiple","processing","processingmultiple","uploadprogress","totaluploadprogress","sending","sendingmultiple","success","successmultiple","canceled","canceledmultiple","complete","completemultiple","reset","maxfilesexceeded","maxfilesreached","queuecomplete"];m.prototype.defaultOptions={url:null,method:"post",withCredentials:false,parallelUploads:2,uploadMultiple:false,maxFilesize:256,paramName:"file",createImageThumbnails:true,maxThumbnailFilesize:10,thumbnailWidth:120,thumbnailHeight:120,filesizeBase:1000,maxFiles:null,params:{},clickable:true,ignoreHiddenFiles:true,acceptedFiles:null,acceptedMimeTypes:null,autoProcessQueue:true,autoQueue:true,addRemoveLinks:false,previewsContainer:null,hiddenInputContainer:"body",capture:null,renameFilename:null,dictDefaultMessage:"Drop files here to upload",dictFallbackMessage:"Your browser does not support drag'n'drop file uploads.",dictFallbackText:"Please use the fallback form below to upload your files like in the olden days.",dictFileTooBig:"File is too big ({{filesize}}MiB). Max filesize: {{maxFilesize}}MiB.",dictInvalidFileType:"You can't upload files of this type.",dictResponseError:"Server responded with {{statusCode}} code.",dictCancelUpload:"Cancel upload",dictCancelUploadConfirmation:"Are you sure you want to cancel this upload?",dictRemoveFile:"Remove file",dictRemoveFileConfirmation:null,dictMaxFilesExceeded:"You can not upload any more files.",accept:function(q,p){return p()},init:function(){return j},forceFallback:false,fallback:function(){var s,t,u,p,q,r;this.element.className=""+this.element.className+" dz-browser-not-supported";r=this.element.getElementsByTagName("div");for(p=0,q=r.length;p<q;p++){s=r[p];if(/(^| )dz-message($| )/.test(s.className)){t=s;s.className="dz-message";continue}}if(!t){t=m.createElement('<div class="dz-message"><span></span></div>');this.element.appendChild(t)}u=t.getElementsByTagName("span")[0];if(u){if(u.textContent!=null){u.textContent=this.options.dictFallbackMessage}else{if(u.innerText!=null){u.innerText=this.options.dictFallbackMessage}}}return this.element.appendChild(this.getFallbackForm())},resize:function(p){var q,r,s;q={srcX:0,srcY:0,srcWidth:p.width,srcHeight:p.height};r=p.width/p.height;q.optWidth=this.options.thumbnailWidth;q.optHeight=this.options.thumbnailHeight;if((q.optWidth==null)&&(q.optHeight==null)){q.optWidth=q.srcWidth;q.optHeight=q.srcHeight}else{if(q.optWidth==null){q.optWidth=r*q.optHeight}else{if(q.optHeight==null){q.optHeight=(1/r)*q.optWidth}}}s=q.optWidth/q.optHeight;if(p.height<q.optHeight||p.width<q.optWidth){q.trgHeight=q.srcHeight;q.trgWidth=q.srcWidth}else{if(r>s){q.srcHeight=p.height;q.srcWidth=q.srcHeight*s}else{q.srcWidth=p.width;q.srcHeight=q.srcWidth/s}}q.srcX=(p.width-q.srcWidth)/2;q.srcY=(p.height-q.srcHeight)/2;return q},drop:function(p){return this.element.classList.remove("dz-drag-hover")},dragstart:j,dragend:function(p){return this.element.classList.remove("dz-drag-hover")},dragenter:function(p){return this.element.classList.add("dz-drag-hover")},dragover:function(p){return this.element.classList.add("dz-drag-hover")},dragleave:function(p){return this.element.classList.remove("dz-drag-hover")},paste:j,reset:function(){return this.element.classList.remove("dz-started")},addedfile:function(z){var A,B,C,p,q,r,s,t,u,v,w,x,y;if(this.element===this.previewsContainer){this.element.classList.add("dz-started")}if(this.previewsContainer){z.previewElement=m.createElement(this.options.previewTemplate.trim());z.previewTemplate=z.previewElement;this.previewsContainer.appendChild(z.previewElement);v=z.previewElement.querySelectorAll("[data-dz-name]");for(p=0,s=v.length;p<s;p++){A=v[p];A.textContent=this._renameFilename(z.name)}w=z.previewElement.querySelectorAll("[data-dz-size]");for(q=0,t=w.length;q<t;q++){A=w[q];A.innerHTML=this.filesize(z.size)}if(this.options.addRemoveLinks){z._removeLink=m.createElement('<a class="dz-remove" href="javascript:undefined;" data-dz-remove>'+this.options.dictRemoveFile+"</a>");z.previewElement.appendChild(z._removeLink)}B=(function(D){return function(E){E.preventDefault();E.stopPropagation();if(z.status===m.UPLOADING){return m.confirm(D.options.dictCancelUploadConfirmation,function(){return D.removeFile(z)})}else{if(D.options.dictRemoveFileConfirmation){return m.confirm(D.options.dictRemoveFileConfirmation,function(){return D.removeFile(z)})}else{return D.removeFile(z)}}}})(this);x=z.previewElement.querySelectorAll("[data-dz-remove]");y=[];for(r=0,u=x.length;r<u;r++){C=x[r];y.push(C.addEventListener("click",B))}return y}},removedfile:function(q){var p;if(q.previewElement){if((p=q.previewElement)!=null){p.parentNode.removeChild(q.previewElement)}}return this._updateMaxFilesReachedClass()},thumbnail:function(t,s){var u,p,q,r;if(t.previewElement){t.previewElement.classList.remove("dz-file-preview");r=t.previewElement.querySelectorAll("[data-dz-thumbnail]");for(p=0,q=r.length;p<q;p++){u=r[p];u.alt=t.name;u.src=s}return setTimeout(((function(v){return function(){return t.previewElement.classList.add("dz-image-preview")}})(this)),1)}},error:function(t,u){var v,p,q,r,s;if(t.previewElement){t.previewElement.classList.add("dz-error");if(typeof u!=="String"&&u.error){u=u.error}r=t.previewElement.querySelectorAll("[data-dz-errormessage]");s=[];for(p=0,q=r.length;p<q;p++){v=r[p];s.push(v.textContent=u)}return s}},errormultiple:j,processing:function(p){if(p.previewElement){p.previewElement.classList.add("dz-processing");if(p._removeLink){return p._removeLink.textContent=this.options.dictCancelUpload}}},processingmultiple:j,uploadprogress:function(u,w,t){var v,p,q,r,s;if(u.previewElement){r=u.previewElement.querySelectorAll("[data-dz-uploadprogress]");s=[];for(p=0,q=r.length;p<q;p++){v=r[p];if(v.nodeName==="PROGRESS"){s.push(v.value=w)}else{s.push(v.style.width=""+w+"%")}}return s}},totaluploadprogress:j,sending:j,sendingmultiple:j,success:function(p){if(p.previewElement){return p.previewElement.classList.add("dz-success")}},successmultiple:j,canceled:function(p){return this.emit("error",p,"Upload canceled.")},canceledmultiple:j,complete:function(p){if(p._removeLink){p._removeLink.textContent=this.options.dictRemoveFile}if(p.previewElement){return p.previewElement.classList.add("dz-complete")}},completemultiple:j,maxfilesexceeded:j,maxfilesreached:j,queuecomplete:j,addedfiles:j,previewTemplate:'<div class="dz-preview dz-file-preview">\n  <div class="dz-image"><img data-dz-thumbnail /></div>\n  <div class="dz-details">\n    <div class="dz-size"><span data-dz-size></span></div>\n    <div class="dz-filename"><span data-dz-name></span></div>\n  </div>\n  <div class="dz-progress"><span class="dz-upload" data-dz-uploadprogress></span></div>\n  <div class="dz-error-message"><span data-dz-errormessage></span></div>\n  <div class="dz-success-mark">\n    <svg width="54px" height="54px" viewBox="0 0 54 54" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:sketch="http://www.bohemiancoding.com/sketch/ns">\n      <title>Check</title>\n      <defs></defs>\n      <g id="Page-1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd" sketch:type="MSPage">\n        <path d="M23.5,31.8431458 L17.5852419,25.9283877 C16.0248253,24.3679711 13.4910294,24.366835 11.9289322,25.9289322 C10.3700136,27.4878508 10.3665912,30.0234455 11.9283877,31.5852419 L20.4147581,40.0716123 C20.5133999,40.1702541 20.6159315,40.2626649 20.7218615,40.3488435 C22.2835669,41.8725651 24.794234,41.8626202 26.3461564,40.3106978 L43.3106978,23.3461564 C44.8771021,21.7797521 44.8758057,19.2483887 43.3137085,17.6862915 C41.7547899,16.1273729 39.2176035,16.1255422 37.6538436,17.6893022 L23.5,31.8431458 Z M27,53 C41.3594035,53 53,41.3594035 53,27 C53,12.6405965 41.3594035,1 27,1 C12.6405965,1 1,12.6405965 1,27 C1,41.3594035 12.6405965,53 27,53 Z" id="Oval-2" stroke-opacity="0.198794158" stroke="#747474" fill-opacity="0.816519475" fill="#FFFFFF" sketch:type="MSShapeGroup"></path>\n      </g>\n    </svg>\n  </div>\n  <div class="dz-error-mark">\n    <svg width="54px" height="54px" viewBox="0 0 54 54" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:sketch="http://www.bohemiancoding.com/sketch/ns">\n      <title>Error</title>\n      <defs></defs>\n      <g id="Page-1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd" sketch:type="MSPage">\n        <g id="Check-+-Oval-2" sketch:type="MSLayerGroup" stroke="#747474" stroke-opacity="0.198794158" fill="#FFFFFF" fill-opacity="0.816519475">\n          <path d="M32.6568542,29 L38.3106978,23.3461564 C39.8771021,21.7797521 39.8758057,19.2483887 38.3137085,17.6862915 C36.7547899,16.1273729 34.2176035,16.1255422 32.6538436,17.6893022 L27,23.3431458 L21.3461564,17.6893022 C19.7823965,16.1255422 17.2452101,16.1273729 15.6862915,17.6862915 C14.1241943,19.2483887 14.1228979,21.7797521 15.6893022,23.3461564 L21.3431458,29 L15.6893022,34.6538436 C14.1228979,36.2202479 14.1241943,38.7516113 15.6862915,40.3137085 C17.2452101,41.8726271 19.7823965,41.8744578 21.3461564,40.3106978 L27,34.6568542 L32.6538436,40.3106978 C34.2176035,41.8744578 36.7547899,41.8726271 38.3137085,40.3137085 C39.8758057,38.7516113 39.8771021,36.2202479 38.3106978,34.6538436 L32.6568542,29 Z M27,53 C41.3594035,53 53,41.3594035 53,27 C53,12.6405965 41.3594035,1 27,1 C12.6405965,1 1,12.6405965 1,27 C1,41.3594035 12.6405965,53 27,53 Z" id="Oval-2" sketch:type="MSShapeGroup"></path>\n        </g>\n      </g>\n    </svg>\n  </div>\n</div>'};n=function(){var r,s,t,u,v,p,q;u=arguments[0],t=2<=arguments.length?c.call(arguments,1):[];for(p=0,q=t.length;p<q;p++){s=t[p];for(r in s){v=s[r];u[r]=v}}return u};function m(q,t){var r,s,p;this.element=q;this.version=m.version;this.defaultOptions.previewTemplate=this.defaultOptions.previewTemplate.replace(/\n*/g,"");this.clickableElements=[];this.listeners=[];this.files=[];if(typeof this.element==="string"){this.element=document.querySelector(this.element)}if(!(this.element&&(this.element.nodeType!=null))){throw new Error("Invalid dropzone element.")}if(this.element.dropzone){throw new Error("Dropzone already attached.")}m.instances.push(this);this.element.dropzone=this;r=(p=m.optionsForElement(this.element))!=null?p:{};this.options=n({},this.defaultOptions,r,t!=null?t:{});if(this.options.forceFallback||!m.isBrowserSupported()){return this.options.fallback.call(this)}if(this.options.url==null){this.options.url=this.element.getAttribute("action")}if(!this.options.url){throw new Error("No URL provided.")}if(this.options.acceptedFiles&&this.options.acceptedMimeTypes){throw new Error("You can't provide both 'acceptedFiles' and 'acceptedMimeTypes'. 'acceptedMimeTypes' is deprecated.")}if(this.options.acceptedMimeTypes){this.options.acceptedFiles=this.options.acceptedMimeTypes;delete this.options.acceptedMimeTypes}this.options.method=this.options.method.toUpperCase();if((s=this.getExistingFallback())&&s.parentNode){s.parentNode.removeChild(s)}if(this.options.previewsContainer!==false){if(this.options.previewsContainer){this.previewsContainer=m.getElement(this.options.previewsContainer,"previewsContainer")}else{this.previewsContainer=this.element}}if(this.options.clickable){if(this.options.clickable===true){this.clickableElements=[this.element]}else{this.clickableElements=m.getElements(this.options.clickable,"clickable")}}this.init()}m.prototype.getAcceptedFiles=function(){var t,p,q,r,s;r=this.files;s=[];for(p=0,q=r.length;p<q;p++){t=r[p];if(t.accepted){s.push(t)}}return s};m.prototype.getRejectedFiles=function(){var t,p,q,r,s;r=this.files;s=[];for(p=0,q=r.length;p<q;p++){t=r[p];if(!t.accepted){s.push(t)}}return s};m.prototype.getFilesWithStatus=function(u){var t,p,q,r,s;r=this.files;s=[];for(p=0,q=r.length;p<q;p++){t=r[p];if(t.status===u){s.push(t)}}return s};m.prototype.getQueuedFiles=function(){return this.getFilesWithStatus(m.QUEUED)};m.prototype.getUploadingFiles=function(){return this.getFilesWithStatus(m.UPLOADING)};m.prototype.getAddedFiles=function(){return this.getFilesWithStatus(m.ADDED)};m.prototype.getActiveFiles=function(){var t,p,q,r,s;r=this.files;s=[];for(p=0,q=r.length;p<q;p++){t=r[p];if(t.status===m.UPLOADING||t.status===m.QUEUED){s.push(t)}}return s};m.prototype.init=function(){var t,u,v,p,q,r,s;if(this.element.tagName==="form"){this.element.setAttribute("enctype","multipart/form-data")}if(this.element.classList.contains("dropzone")&&!this.element.querySelector(".dz-message")){this.element.appendChild(m.createElement('<div class="dz-default dz-message"><span>'+this.options.dictDefaultMessage+"</span></div>"))}if(this.clickableElements.length){v=(function(w){return function(){if(w.hiddenFileInput){w.hiddenFileInput.parentNode.removeChild(w.hiddenFileInput)}w.hiddenFileInput=document.createElement("input");w.hiddenFileInput.setAttribute("type","file");if((w.options.maxFiles==null)||w.options.maxFiles>1){w.hiddenFileInput.setAttribute("multiple","multiple")}w.hiddenFileInput.className="dz-hidden-input";if(w.options.acceptedFiles!=null){w.hiddenFileInput.setAttribute("accept",w.options.acceptedFiles)}if(w.options.capture!=null){w.hiddenFileInput.setAttribute("capture",w.options.capture)}w.hiddenFileInput.style.visibility="hidden";w.hiddenFileInput.style.position="absolute";w.hiddenFileInput.style.top="0";w.hiddenFileInput.style.left="0";w.hiddenFileInput.style.height="0";w.hiddenFileInput.style.width="0";document.querySelector(w.options.hiddenInputContainer).appendChild(w.hiddenFileInput);return w.hiddenFileInput.addEventListener("change",function(){var z,A,x,y;A=w.hiddenFileInput.files;if(A.length){for(x=0,y=A.length;x<y;x++){z=A[x];w.addFile(z)}}w.emit("addedfiles",A);return v()})}})(this);v()}this.URL=(r=window.URL)!=null?r:window.webkitURL;s=this.events;for(p=0,q=s.length;p<q;p++){t=s[p];this.on(t,this.options[t])}this.on("uploadprogress",(function(w){return function(){return w.updateTotalUploadProgress()}})(this));this.on("removedfile",(function(w){return function(){return w.updateTotalUploadProgress()}})(this));this.on("canceled",(function(w){return function(x){return w.emit("complete",x)}})(this));this.on("complete",(function(w){return function(x){if(w.getAddedFiles().length===0&&w.getUploadingFiles().length===0&&w.getQueuedFiles().length===0){return setTimeout((function(){return w.emit("queuecomplete")}),0)}}})(this));u=function(w){w.stopPropagation();if(w.preventDefault){return w.preventDefault()}else{return w.returnValue=false}};this.listeners=[{element:this.element,events:{dragstart:(function(w){return function(x){return w.emit("dragstart",x)}})(this),dragenter:(function(w){return function(x){u(x);return w.emit("dragenter",x)}})(this),dragover:(function(w){return function(y){var z;try{z=y.dataTransfer.effectAllowed}catch(x){}y.dataTransfer.dropEffect="move"===z||"linkMove"===z?"move":"copy";u(y);return w.emit("dragover",y)}})(this),dragleave:(function(w){return function(x){return w.emit("dragleave",x)}})(this),drop:(function(w){return function(x){u(x);return w.drop(x)}})(this),dragend:(function(w){return function(x){return w.emit("dragend",x)}})(this)}}];this.clickableElements.forEach((function(w){return function(x){return w.listeners.push({element:x,events:{click:function(y){if((x!==w.element)||(y.target===w.element||m.elementInside(y.target,w.element.querySelector(".dz-message")))){w.hiddenFileInput.click()}return true}}})}})(this));this.enable();return this.options.init.call(this)};m.prototype.destroy=function(){var p;this.disable();this.removeAllFiles(true);if((p=this.hiddenFileInput)!=null?p.parentNode:void 0){this.hiddenFileInput.parentNode.removeChild(this.hiddenFileInput);this.hiddenFileInput=null}delete this.element.dropzone;return m.instances.splice(m.instances.indexOf(this),1)};m.prototype.updateTotalUploadProgress=function(){var s,t,u,v,w,p,q,r;v=0;u=0;s=this.getActiveFiles();if(s.length){r=this.getActiveFiles();for(p=0,q=r.length;p<q;p++){t=r[p];v+=t.upload.bytesSent;u+=t.upload.total}w=100*v/u}else{w=100}return this.emit("totaluploadprogress",w,u,v)};m.prototype._getParamName=function(p){if(typeof this.options.paramName==="function"){return this.options.paramName(p)}else{return""+this.options.paramName+(this.options.uploadMultiple?"["+p+"]":"")}};m.prototype._renameFilename=function(p){if(typeof this.options.renameFilename!=="function"){return p}return this.options.renameFilename(p)};m.prototype.getFallbackForm=function(){var p,q,r,s;if(p=this.getExistingFallback()){return p}r='<div class="dz-fallback">';if(this.options.dictFallbackText){r+="<p>"+this.options.dictFallbackText+"</p>"}r+='<input type="file" name="'+(this._getParamName(0))+'" '+(this.options.uploadMultiple?'multiple="multiple"':void 0)+' /><input type="submit" value="Upload!"></div>';q=m.createElement(r);if(this.element.tagName!=="FORM"){s=m.createElement('<form action="'+this.options.url+'" enctype="multipart/form-data" method="'+this.options.method+'"></form>');s.appendChild(q)}else{this.element.setAttribute("enctype","multipart/form-data");this.element.setAttribute("method",this.options.method)}return s!=null?s:q};m.prototype.getExistingFallback=function(){var s,t,u,p,q,r;t=function(y){var x,v,w;for(v=0,w=y.length;v<w;v++){x=y[v];if(/(^| )fallback($| )/.test(x.className)){return x}}};r=["div","form"];for(p=0,q=r.length;p<q;p++){u=r[p];if(s=t(this.element.getElementsByTagName(u))){return s}}};m.prototype.setupEventListeners=function(){var t,u,v,p,q,r,s;r=this.listeners;s=[];for(p=0,q=r.length;p<q;p++){t=r[p];s.push((function(){var w,x;w=t.events;x=[];for(u in w){v=w[u];x.push(t.element.addEventListener(u,v,false))}return x})())}return s};m.prototype.removeEventListeners=function(){var t,u,v,p,q,r,s;r=this.listeners;s=[];for(p=0,q=r.length;p<q;p++){t=r[p];s.push((function(){var w,x;w=t.events;x=[];for(u in w){v=w[u];x.push(t.element.removeEventListener(u,v,false))}return x})())}return s};m.prototype.disable=function(){var t,p,q,r,s;this.clickableElements.forEach(function(u){return u.classList.remove("dz-clickable")});this.removeEventListeners();r=this.files;s=[];for(p=0,q=r.length;p<q;p++){t=r[p];s.push(this.cancelUpload(t))}return s};m.prototype.enable=function(){this.clickableElements.forEach(function(p){return p.classList.add("dz-clickable")});return this.setupEventListeners()};m.prototype.filesize=function(v){var r,s,t,u,w,x,p,q;t=0;u="b";if(v>0){x=["TB","GB","MB","KB","b"];for(s=p=0,q=x.length;p<q;s=++p){w=x[s];r=Math.pow(this.options.filesizeBase,4-s)/10;if(v>=r){t=v/Math.pow(this.options.filesizeBase,4-s);u=w;break}}t=Math.round(10*t)/10}return"<strong>"+t+"</strong> "+u};m.prototype._updateMaxFilesReachedClass=function(){if((this.options.maxFiles!=null)&&this.getAcceptedFiles().length>=this.options.maxFiles){if(this.getAcceptedFiles().length===this.options.maxFiles){this.emit("maxfilesreached",this.files)}return this.element.classList.add("dz-max-files-reached")}else{return this.element.classList.remove("dz-max-files-reached")}};m.prototype.drop=function(p){var q,r;if(!p.dataTransfer){return}this.emit("drop",p);q=p.dataTransfer.files;this.emit("addedfiles",q);if(q.length){r=p.dataTransfer.items;if(r&&r.length&&(r[0].webkitGetAsEntry!=null)){this._addFilesFromItems(r)}else{this.handleFiles(q)}}};m.prototype.paste=function(q){var r,p;if((q!=null?(p=q.clipboardData)!=null?p.items:void 0:void 0)==null){return}this.emit("paste",q);r=q.clipboardData.items;if(r.length){return this._addFilesFromItems(r)}};m.prototype.handleFiles=function(t){var s,p,q,r;r=[];for(p=0,q=t.length;p<q;p++){s=t[p];r.push(this.addFile(s))}return r};m.prototype._addFilesFromItems=function(u){var s,t,p,q,r;r=[];for(p=0,q=u.length;p<q;p++){t=u[p];if((t.webkitGetAsEntry!=null)&&(s=t.webkitGetAsEntry())){if(s.isFile){r.push(this.addFile(t.getAsFile()))}else{if(s.isDirectory){r.push(this._addFilesFromDirectory(s,s.name))}else{r.push(void 0)}}}else{if(t.getAsFile!=null){if((t.kind==null)||t.kind==="file"){r.push(this.addFile(t.getAsFile()))}else{r.push(void 0)}}else{r.push(void 0)}}}return r};m.prototype._addFilesFromDirectory=function(p,s){var q,r,t;q=p.createReader();r=function(u){return typeof console!=="undefined"&&console!==null?typeof console.log==="function"?console.log(u):void 0:void 0};t=(function(u){return function(){return q.readEntries(function(x){var y,v,w;if(x.length>0){for(v=0,w=x.length;v<w;v++){y=x[v];if(y.isFile){y.file(function(z){if(u.options.ignoreHiddenFiles&&z.name.substring(0,1)==="."){return}z.fullPath=""+s+"/"+z.name;return u.addFile(z)})}else{if(y.isDirectory){u._addFilesFromDirectory(y,""+s+"/"+y.name)}}}t()}return null},r)}})(this);return t()};m.prototype.accept=function(q,p){if(q.size>this.options.maxFilesize*1024*1024){return p(this.options.dictFileTooBig.replace("{{filesize}}",Math.round(q.size/1024/10.24)/100).replace("{{maxFilesize}}",this.options.maxFilesize))}else{if(!m.isValidFile(q,this.options.acceptedFiles)){return p(this.options.dictInvalidFileType)}else{if((this.options.maxFiles!=null)&&this.getAcceptedFiles().length>=this.options.maxFiles){p(this.options.dictMaxFilesExceeded.replace("{{maxFiles}}",this.options.maxFiles));return this.emit("maxfilesexceeded",q)}else{return this.options.accept.call(this,q,p)}}}};m.prototype.addFile=function(p){p.upload={progress:0,total:p.size,bytesSent:0};this.files.push(p);p.status=m.ADDED;this.emit("addedfile",p);this._enqueueThumbnail(p);return this.accept(p,(function(q){return function(r){if(r){p.accepted=false;q._errorProcessing([p],r)}else{p.accepted=true;if(q.options.autoQueue){q.enqueueFile(p)}}return q._updateMaxFilesReachedClass()}})(this))};m.prototype.enqueueFiles=function(s){var r,p,q;for(p=0,q=s.length;p<q;p++){r=s[p];this.enqueueFile(r)}return null};m.prototype.enqueueFile=function(p){if(p.status===m.ADDED&&p.accepted===true){p.status=m.QUEUED;if(this.options.autoProcessQueue){return setTimeout(((function(q){return function(){return q.processQueue()}})(this)),0)}}else{throw new Error("This file can't be queued because it has already been processed or was rejected.")}};m.prototype._thumbnailQueue=[];m.prototype._processingThumbnail=false;m.prototype._enqueueThumbnail=function(p){if(this.options.createImageThumbnails&&p.type.match(/image.*/)&&p.size<=this.options.maxThumbnailFilesize*1024*1024){this._thumbnailQueue.push(p);return setTimeout(((function(q){return function(){return q._processThumbnailQueue()}})(this)),0)}};m.prototype._processThumbnailQueue=function(){if(this._processingThumbnail||this._thumbnailQueue.length===0){return}this._processingThumbnail=true;return this.createThumbnail(this._thumbnailQueue.shift(),(function(p){return function(){p._processingThumbnail=false;return p._processThumbnailQueue()}})(this))};m.prototype.removeFile=function(p){if(p.status===m.UPLOADING){this.cancelUpload(p)}this.files=k(this.files,p);this.emit("removedfile",p);if(this.files.length===0){return this.emit("reset")}};m.prototype.removeAllFiles=function(s){var t,p,q,r;if(s==null){s=false}r=this.files.slice();for(p=0,q=r.length;p<q;p++){t=r[p];if(t.status!==m.UPLOADING||s){this.removeFile(t)}}return null};m.prototype.createThumbnail=function(q,p){var r;r=new FileReader;r.onload=(function(s){return function(){if(q.type==="image/svg+xml"){s.emit("thumbnail",q,r.result);if(p!=null){p()}return}return s.createThumbnailFromUrl(q,r.result,p)}})(this);return r.readAsDataURL(q)};m.prototype.createThumbnailFromUrl=function(r,s,p,q){var t;t=document.createElement("img");if(q){t.crossOrigin=q}t.onload=(function(u){return function(){var z,A,B,C,v,w,x,y;r.width=t.width;r.height=t.height;B=u.options.resize.call(u,r);if(B.trgWidth==null){B.trgWidth=B.optWidth}if(B.trgHeight==null){B.trgHeight=B.optHeight}z=document.createElement("canvas");A=z.getContext("2d");z.width=B.trgWidth;z.height=B.trgHeight;g(A,t,(v=B.srcX)!=null?v:0,(w=B.srcY)!=null?w:0,B.srcWidth,B.srcHeight,(x=B.trgX)!=null?x:0,(y=B.trgY)!=null?y:0,B.trgWidth,B.trgHeight);C=z.toDataURL("image/png");u.emit("thumbnail",r,C);if(p!=null){return p()}}})(this);if(p!=null){t.onerror=p}return t.src=s};m.prototype.processQueue=function(){var p,q,r,s;q=this.options.parallelUploads;r=this.getUploadingFiles().length;p=r;if(r>=q){return}s=this.getQueuedFiles();if(!(s.length>0)){return}if(this.options.uploadMultiple){return this.processFiles(s.slice(0,q-r))}else{while(p<q){if(!s.length){return}this.processFile(s.shift());p++}}};m.prototype.processFile=function(p){return this.processFiles([p])};m.prototype.processFiles=function(s){var r,p,q;for(p=0,q=s.length;p<q;p++){r=s[p];r.processing=true;r.status=m.UPLOADING;this.emit("processing",r)}if(this.options.uploadMultiple){this.emit("processingmultiple",s)}return this.uploadFiles(s)};m.prototype._getFilesWithXhr=function(r){var p,q;return q=(function(){var s,t,u,v;u=this.files;v=[];for(s=0,t=u.length;s<t;s++){p=u[s];if(p.xhr===r){v.push(p)}}return v}).call(this)};m.prototype.cancelUpload=function(u){var v,w,p,q,r,s,t;if(u.status===m.UPLOADING){w=this._getFilesWithXhr(u.xhr);for(p=0,r=w.length;p<r;p++){v=w[p];v.status=m.CANCELED}u.xhr.abort();for(q=0,s=w.length;q<s;q++){v=w[q];this.emit("canceled",v)}if(this.options.uploadMultiple){this.emit("canceledmultiple",w)}}else{if((t=u.status)===m.ADDED||t===m.QUEUED){u.status=m.CANCELED;this.emit("canceled",u);if(this.options.uploadMultiple){this.emit("canceledmultiple",[u])}}}if(this.options.autoProcessQueue){return this.processQueue()}};o=function(){var p,q;q=arguments[0],p=2<=arguments.length?c.call(arguments,1):[];if(typeof q==="function"){return q.apply(this,p)}return q};m.prototype.uploadFile=function(p){return this.uploadFiles([p])};m.prototype.uploadFiles=function(F){var E,G,H,I,K,J,L,M,N,O,P,Q,R,S,T,U,V,W,X,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D;X=new XMLHttpRequest();for(p=0,t=F.length;p<t;p++){E=F[p];E.xhr=X}Q=o(this.options.method,F);V=o(this.options.url,F);X.open(Q,V,true);X.withCredentials=!!this.options.withCredentials;T=null;H=(function(Y){return function(){var Z,aa,ab;ab=[];for(Z=0,aa=F.length;Z<aa;Z++){E=F[Z];ab.push(Y._errorProcessing(F,T||Y.options.dictResponseError.replace("{{statusCode}}",X.status),X))}return ab}})(this);U=(function(Y){return function(ah){var ag,ai,Z,aa,ab,ac,ad,ae,af;if(ah!=null){ai=100*ah.loaded/ah.total;for(Z=0,ac=F.length;Z<ac;Z++){E=F[Z];E.upload={progress:ai,total:ah.total,bytesSent:ah.loaded}}}else{ag=true;ai=100;for(aa=0,ad=F.length;aa<ad;aa++){E=F[aa];if(!(E.upload.progress===100&&E.upload.bytesSent===E.upload.total)){ag=false}E.upload.progress=ai;E.upload.bytesSent=E.upload.total}if(ag){return}}af=[];for(ab=0,ae=F.length;ab<ae;ab++){E=F[ab];af.push(Y.emit("uploadprogress",E,ai,E.upload.bytesSent))}return af}})(this);X.onload=(function(Y){return function(ab){var aa;if(F[0].status===m.CANCELED){return}if(X.readyState!==4){return}T=X.responseText;if(X.getResponseHeader("content-type")&&~X.getResponseHeader("content-type").indexOf("application/json")){try{T=JSON.parse(T)}catch(Z){ab=Z;T="Invalid JSON response from server."}}U();if(!((200<=(aa=X.status)&&aa<300))){return H()}else{return Y._finished(F,T,ab)}}})(this);X.onerror=(function(Y){return function(){if(F[0].status===m.CANCELED){return}return H()}})(this);S=(y=X.upload)!=null?y:X;S.onprogress=U;J={Accept:"application/json","Cache-Control":"no-cache","X-Requested-With":"XMLHttpRequest"};if(this.options.headers){n(J,this.options.headers)}for(I in J){K=J[I];if(K){X.setRequestHeader(I,K)}}G=new FormData();if(this.options.params){z=this.options.params;for(P in z){W=z[P];G.append(P,W)}}for(q=0,u=F.length;q<u;q++){E=F[q];this.emit("sending",E,X,G)}if(this.options.uploadMultiple){this.emit("sendingmultiple",F,X,G)}if(this.element.tagName==="FORM"){A=this.element.querySelectorAll("input, textarea, select, button");for(r=0,v=A.length;r<v;r++){M=A[r];N=M.getAttribute("name");O=M.getAttribute("type");if(M.tagName==="SELECT"&&M.hasAttribute("multiple")){B=M.options;for(s=0,w=B.length;s<w;s++){R=B[s];if(R.selected){G.append(N,R.value)}}}else{if(!O||((C=O.toLowerCase())!=="checkbox"&&C!=="radio")||M.checked){G.append(N,M.value)}}}}for(L=x=0,D=F.length-1;0<=D?x<=D:x>=D;L=0<=D?++x:--x){G.append(this._getParamName(L),F[L],this._renameFilename(F[L].name))}return this.submitRequest(X,G,F)};m.prototype.submitRequest=function(r,q,p){return r.send(q)};m.prototype._finished=function(t,u,r){var s,p,q;for(p=0,q=t.length;p<q;p++){s=t[p];s.status=m.SUCCESS;this.emit("success",s,u,r);this.emit("complete",s)}if(this.options.uploadMultiple){this.emit("successmultiple",t,u,r);this.emit("completemultiple",t)}if(this.options.autoProcessQueue){return this.processQueue()}};m.prototype._errorProcessing=function(s,t,u){var r,p,q;for(p=0,q=s.length;p<q;p++){r=s[p];r.status=m.ERROR;this.emit("error",r,t,u);this.emit("complete",r)}if(this.options.uploadMultiple){this.emit("errormultiple",s,t,u);this.emit("completemultiple",s)}if(this.options.autoProcessQueue){return this.processQueue()}};return m})(i);h.version="4.3.0";h.options={};h.optionsForElement=function(l){if(l.getAttribute("id")){return h.options[d(l.getAttribute("id"))]}else{return void 0}};h.instances=[];h.forElement=function(l){if(typeof l==="string"){l=document.querySelector(l)}if((l!=null?l.dropzone:void 0)==null){throw new Error("No Dropzone found for given element. This is probably because you're trying to access it before Dropzone had the time to initialize. Use the `init` option to setup any additional observers on your Dropzone.")}return l.dropzone};h.autoDiscover=true;h.discover=function(){var o,p,q,l,m,n;if(document.querySelectorAll){q=document.querySelectorAll(".dropzone")}else{q=[];o=function(v){var u,r,s,t;t=[];for(r=0,s=v.length;r<s;r++){u=v[r];if(/(^| )dropzone($| )/.test(u.className)){t.push(q.push(u))}else{t.push(void 0)}}return t};o(document.getElementsByTagName("div"));o(document.getElementsByTagName("form"))}n=[];for(l=0,m=q.length;l<m;l++){p=q[l];if(h.optionsForElement(p)!==false){n.push(new h(p))}else{n.push(void 0)}}return n};h.blacklistedBrowsers=[/opera.*Macintosh.*version\/12/i];h.isBrowserSupported=function(){var o,p,l,m,n;o=true;if(window.File&&window.FileReader&&window.FileList&&window.Blob&&window.FormData&&document.querySelector){if(!("classList" in document.createElement("a"))){o=false}else{n=h.blacklistedBrowsers;for(l=0,m=n.length;l<m;l++){p=n[l];if(p.test(navigator.userAgent)){o=false;continue}}}}else{o=false}return o};k=function(p,q){var o,l,m,n;n=[];for(l=0,m=p.length;l<m;l++){o=p[l];if(o!==q){n.push(o)}}return n};d=function(l){return l.replace(/[\-_](\w)/g,function(m){return m.charAt(1).toUpperCase()})};h.createElement=function(m){var l;l=document.createElement("div");l.innerHTML=m;return l.childNodes[0]};h.elementInside=function(m,l){if(m===l){return true}while(m=m.parentNode){if(m===l){return true}}return false};h.getElement=function(l,n){var m;if(typeof l==="string"){m=document.querySelector(l)}else{if(l.nodeType!=null){m=l}}if(m==null){throw new Error("Invalid `"+n+"` option provided. Please provide a CSS selector or a plain HTML element.")}return m};h.getElements=function(u,v){var r,s,t,m,n,o,p,q;if(u instanceof Array){t=[];try{for(m=0,o=u.length;m<o;m++){s=u[m];t.push(this.getElement(s,v))}}catch(l){r=l;t=null}}else{if(typeof u==="string"){t=[];q=document.querySelectorAll(u);for(n=0,p=q.length;n<p;n++){s=q[n];t.push(s)}}else{if(u.nodeType!=null){t=[u]}}}if(!((t!=null)&&t.length)){throw new Error("Invalid `"+v+"` option provided. Please provide a CSS selector, a plain HTML element or a list of those.")}return t};h.confirm=function(m,l,n){if(window.confirm(m)){return l()}else{if(n!=null){return n()}}};h.isValidFile=function(p,n){var o,q,r,l,m;if(!n){return true}n=n.split(",");q=p.type;o=q.replace(/\/.*$/,"");for(l=0,m=n.length;l<m;l++){r=n[l];r=r.trim();if(r.charAt(0)==="."){if(p.name.toLowerCase().indexOf(r.toLowerCase(),p.name.length-r.length)!==-1){return true}}else{if(/\/\*$/.test(r)){if(o===r.replace(/\/.*$/,"")){return true}}else{if(q===r){return true}}}}return false};if(typeof jQuery!=="undefined"&&jQuery!==null){jQuery.fn.dropzone=function(l){return this.each(function(){return new h(this,l)})}}if(typeof module!=="undefined"&&module!==null){module.exports=h}else{window.Dropzone=h}h.ADDED="added";h.QUEUED="queued";h.ACCEPTED=h.QUEUED;h.UPLOADING="uploading";h.PROCESSING=h.UPLOADING;h.CANCELED="canceled";h.ERROR="error";h.SUCCESS="success";f=function(r){var l,m,n,o,p,q,s,t,u,v;s=r.naturalWidth;q=r.naturalHeight;m=document.createElement("canvas");m.width=1;m.height=q;n=m.getContext("2d");n.drawImage(r,0,0);o=n.getImageData(0,0,1,q).data;v=0;p=q;t=q;while(t>v){l=o[(t-1)*4+3];if(l===0){p=t}else{v=t}t=(p+v)>>1}u=t/q;if(u===0){return 1}else{return u}};g=function(l,q,t,u,s,r,o,p,n,m){var v;v=f(q);return l.drawImage(q,t,u,s,r,o,p,n,m/v)};e=function(w,p){var m,n,o,q,r,s,t,u,v;o=false;v=true;n=w.document;u=n.documentElement;m=(n.addEventListener?"addEventListener":"attachEvent");t=(n.addEventListener?"removeEventListener":"detachEvent");s=(n.addEventListener?"":"on");q=function(x){if(x.type==="readystatechange"&&n.readyState!=="complete"){return}(x.type==="load"?w:n)[t](s+x.type,q,false);if(!o&&(o=true)){return p.call(w,x.type||x)}};r=function(){var y;try{u.doScroll("left")}catch(x){y=x;setTimeout(r,50);return}return q("poll")};if(n.readyState!=="complete"){if(n.createEventObject&&u.doScroll){try{v=!w.frameElement}catch(l){}if(v){r()}}n[m](s+"DOMContentLoaded",q,false);n[m](s+"readystatechange",q,false);return w[m](s+"load",q,false)}};h._autoDiscoverFunction=function(){if(h.autoDiscover){return h.discover()}};e(window,h._autoDiscoverFunction)}).call(this);