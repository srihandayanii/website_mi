"use strict";(function(b,a){if(typeof exports==="object"){module.exports=a()}else{if(typeof define==="function"&&define.amd){define(["jquery","googlemaps!"],a)}else{b.GMaps=a()}}}(this,function(){
/*
 * GMaps.js v0.4.24
 * http://hpneo.github.com/gmaps/
 *
 * Copyright 2016, Gustavo Leon
 * Released under the MIT License.
 */
var f=function(p,o){var n;if(p===o){return p}for(n in o){if(o[n]!==undefined){p[n]=o[n]}}return p};var k=function(o,p){var n;if(o===p){return o}for(n in p){if(o[n]!=undefined){o[n]=p[n]}}return o};var b=function(n,q){var s=Array.prototype.slice.call(arguments,2),p=[],o=n.length,r;if(Array.prototype.map&&n.map===Array.prototype.map){p=Array.prototype.map.call(n,function(u){var t=s.slice(0);t.splice(0,0,u);return q.apply(this,t)})}else{for(r=0;r<o;r++){callback_params=s;callback_params.splice(0,0,n[r]);p.push(q.apply(this,callback_params))}}return p};var a=function(n){var p=[],o;for(o=0;o<n.length;o++){p=p.concat(n[o])}return p};var d=function(n,q){var o=n[0],p=n[1];if(q){o=n[1];p=n[0]}return new google.maps.LatLng(o,p)};var c=function(n,p){var o;for(o=0;o<n.length;o++){if(!(n[o] instanceof google.maps.LatLng)){if(n[o].length>0&&typeof(n[o][0])==="object"){n[o]=c(n[o],p)}else{n[o]=d(n[o],p)}}}return n};var i=function(o,p){var q,n=o.replace(".","");if("jQuery" in this&&p){q=$("."+n,p)[0]}else{q=document.getElementsByClassName(n)[0]}return q};var h=function(p,n){var o,p=p.replace("#","");if("jQuery" in window&&n){o=$("#"+p,n)[0]}else{o=document.getElementById(p)}return o};var g=function(p){var n=0,o=0;if(p.offsetParent){do{n+=p.offsetLeft;o+=p.offsetTop}while(p=p.offsetParent)}return[n,o]};var j=(function(o){var n=document;var p=function(G){if(!(typeof window.google==="object"&&window.google.maps)){if(typeof window.console==="object"&&window.console.error){console.error("Google Maps API is required. Please register the following JavaScript library https://maps.googleapis.com/maps/api/js.")}return function(){}}if(!this){return new p(G)}G.zoom=G.zoom||15;G.mapType=G.mapType||"roadmap";var O=function(U,T){return U===undefined?T:U};var L=this,u,t=["bounds_changed","center_changed","click","dblclick","drag","dragend","dragstart","idle","maptypeid_changed","projection_changed","resize","tilesloaded","zoom_changed"],s=["mousemove","mouseout","mouseover"],H=["el","lat","lng","mapType","width","height","markerClusterer","enableNewStyle"],v=G.el||G.div,C=G.markerClusterer,A=google.maps.MapTypeId[G.mapType.toUpperCase()],x=new google.maps.LatLng(G.lat,G.lng),P=O(G.zoomControl,true),Q=G.zoomControlOpt||{style:"DEFAULT",position:"TOP_LEFT"},S=Q.style||"DEFAULT",R=Q.position||"TOP_LEFT",J=O(G.panControl,true),B=O(G.mapTypeControl,true),K=O(G.scaleControl,true),N=O(G.streetViewControl,true),I=O(I,true),z={},w={zoom:this.zoom,center:x,mapTypeId:A},y={panControl:J,zoomControl:P,zoomControlOptions:{style:google.maps.ZoomControlStyle[S],position:google.maps.ControlPosition[R]},mapTypeControl:B,scaleControl:K,streetViewControl:N,overviewMapControl:I};if(typeof(G.el)==="string"||typeof(G.div)==="string"){if(v.indexOf("#")>-1){this.el=h(v,G.context)}else{this.el=i.apply(this,[v,G.context])}}else{this.el=v}if(typeof(this.el)==="undefined"||this.el===null){throw"No element defined."}window.context_menu=window.context_menu||{};window.context_menu[L.el.id]={};this.controls=[];this.overlays=[];this.layers=[];this.singleLayers={};this.markers=[];this.polylines=[];this.routes=[];this.polygons=[];this.infoWindow=null;this.overlay_el=null;this.zoom=G.zoom;this.registered_events={};this.el.style.width=G.width||this.el.scrollWidth||this.el.offsetWidth;this.el.style.height=G.height||this.el.scrollHeight||this.el.offsetHeight;google.maps.visualRefresh=G.enableNewStyle;for(u=0;u<H.length;u++){delete G[H[u]]}if(G.disableDefaultUI!=true){w=f(w,y)}z=f(w,G);for(u=0;u<t.length;u++){delete z[t[u]]}for(u=0;u<s.length;u++){delete z[s[u]]}this.map=new google.maps.Map(this.el,z);if(C){this.markerClusterer=C.apply(this,[this.map])}var q=function(Y,Z){var aa="",ae=window.context_menu[L.el.id][Y];for(var ab in ae){if(ae.hasOwnProperty(ab)){var ad=ae[ab];aa+='<li><a id="'+Y+"_"+ab+'" href="#">'+ad.title+"</a></li>"}}if(!h("gmaps_context_menu")){return}var U=h("gmaps_context_menu");U.innerHTML=aa;var W=U.getElementsByTagName("a"),X=W.length,ab;for(ab=0;ab<X;ab++){var V=W[ab];var T=function(ah){ah.preventDefault();ae[this.id.replace(Y+"_","")].action.apply(L,[Z]);L.hideContextMenu()};google.maps.event.clearListeners(V,"click");google.maps.event.addDomListenerOnce(V,"click",T,false)}var af=g.apply(this,[L.el]),ac=af[0]+Z.pixel.x-15,ag=af[1]+Z.pixel.y-15;U.style.left=ac+"px";U.style.top=ag+"px"};this.buildContextMenu=function(U,V){if(U==="marker"){V.pixel={};var W=new google.maps.OverlayView();W.setMap(L.map);W.draw=function(){var Y=W.getProjection(),X=V.marker.getPosition();V.pixel=Y.fromLatLngToContainerPixel(X);q(U,V)}}else{q(U,V)}var T=h("gmaps_context_menu");setTimeout(function(){T.style.display="block"},0)};this.setContextMenu=function(W){window.context_menu[L.el.id][W.control]={};var U,X=n.createElement("ul");for(U in W.options){if(W.options.hasOwnProperty(U)){var V=W.options[U];window.context_menu[L.el.id][W.control][V.name]={title:V.title,action:V.action}}}X.id="gmaps_context_menu";X.style.display="none";X.style.position="absolute";X.style.minWidth="100px";X.style.background="white";X.style.listStyle="none";X.style.padding="8px";X.style.boxShadow="2px 2px 6px #ccc";if(!h("gmaps_context_menu")){n.body.appendChild(X)}var T=h("gmaps_context_menu");google.maps.event.addDomListener(T,"mouseout",function(Y){if(!Y.relatedTarget||!this.contains(Y.relatedTarget)){window.setTimeout(function(){T.style.display="none"},400)}},false)};this.hideContextMenu=function(){var T=h("gmaps_context_menu");if(T){T.style.display="none"}};var M=function(U,T){google.maps.event.addListener(U,T,function(V){if(V==undefined){V=this}G[T].apply(this,[V]);L.hideContextMenu()})};google.maps.event.addListener(this.map,"zoom_changed",this.hideContextMenu);for(var r=0;r<t.length;r++){var E=t[r];if(E in G){M(this.map,E)}}for(var r=0;r<s.length;r++){var E=s[r];if(E in G){M(this.map,E)}}google.maps.event.addListener(this.map,"rightclick",function(T){if(G.rightclick){G.rightclick.apply(this,[T])}if(window.context_menu[L.el.id]["map"]!=undefined){L.buildContextMenu("map",T)}});this.refresh=function(){google.maps.event.trigger(this.map,"resize")};this.fitZoom=function(){var U=[],V=this.markers.length,T;for(T=0;T<V;T++){if(typeof(this.markers[T].visible)==="boolean"&&this.markers[T].visible){U.push(this.markers[T].getPosition())}}this.fitLatLngBounds(U)};this.fitLatLngBounds=function(V){var W=V.length,T=new google.maps.LatLngBounds(),U;for(U=0;U<W;U++){T.extend(V[U])}this.map.fitBounds(T)};this.setCenter=function(U,V,T){this.map.panTo(new google.maps.LatLng(U,V));if(T){T()}};this.getElement=function(){return this.el};this.zoomIn=function(T){T=T||1;this.zoom=this.map.getZoom()+T;this.map.setZoom(this.zoom)};this.zoomOut=function(T){T=T||1;this.zoom=this.map.getZoom()-T;this.map.setZoom(this.zoom)};var F=[],D;for(D in this.map){if(typeof(this.map[D])=="function"&&!this[D]){F.push(D)}}for(u=0;u<F.length;u++){(function(T,V,U){T[U]=function(){return V[U].apply(V,arguments)}})(this,this.map,F[u])}};return p})(this);j.prototype.createControl=function(q){var n=document.createElement("div");n.style.cursor="pointer";if(q.disableDefaultStyles!==true){n.style.fontFamily="Roboto, Arial, sans-serif";n.style.fontSize="11px";n.style.boxShadow="rgba(0, 0, 0, 0.298039) 0px 1px 4px -1px"}for(var p in q.style){n.style[p]=q.style[p]}if(q.id){n.id=q.id}if(q.title){n.title=q.title}if(q.classes){n.className=q.classes}if(q.content){if(typeof q.content==="string"){n.innerHTML=q.content}else{if(q.content instanceof HTMLElement){n.appendChild(q.content)}}}if(q.position){n.position=google.maps.ControlPosition[q.position.toUpperCase()]}for(var o in q.events){(function(s,r){google.maps.event.addDomListener(s,r,function(){q.events[r].apply(this,[this])})})(n,o)}n.index=1;return n};j.prototype.addControl=function(o){var n=this.createControl(o);this.controls.push(n);this.map.controls[n.position].push(n);return n};j.prototype.removeControl=function(n){var q=null,p;for(p=0;p<this.controls.length;p++){if(this.controls[p]==n){q=this.controls[p].position;this.controls.splice(p,1)}}if(q){for(p=0;p<this.map.controls.length;p++){var o=this.map.controls[n.position];if(o.getAt(p)==n){o.removeAt(p);break}}}return n};j.prototype.createMarker=function(w){if(w.lat==undefined&&w.lng==undefined&&w.position==undefined){throw"No latitude or longitude defined."}var y=this,o=w.details,q=w.fences,x=w.outside,n={position:new google.maps.LatLng(w.lat,w.lng),map:null},v=f(n,w);delete v.lat;delete v.lng;delete v.fences;delete v.outside;var s=new google.maps.Marker(v);s.fences=q;if(w.infoWindow){s.infoWindow=new google.maps.InfoWindow(w.infoWindow);var r=["closeclick","content_changed","domready","position_changed","zindex_changed"];for(var p=0;p<r.length;p++){(function(A,z){if(w.infoWindow[z]){google.maps.event.addListener(A,z,function(B){w.infoWindow[z].apply(this,[B])})}})(s.infoWindow,r[p])}}var t=["animation_changed","clickable_changed","cursor_changed","draggable_changed","flat_changed","icon_changed","position_changed","shadow_changed","shape_changed","title_changed","visible_changed","zindex_changed"];var u=["dblclick","drag","dragend","dragstart","mousedown","mouseout","mouseover","mouseup"];for(var p=0;p<t.length;p++){(function(A,z){if(w[z]){google.maps.event.addListener(A,z,function(){w[z].apply(this,[this])})}})(s,t[p])}for(var p=0;p<u.length;p++){(function(z,B,A){if(w[A]){google.maps.event.addListener(B,A,function(C){if(!C.pixel){C.pixel=z.getProjection().fromLatLngToPoint(C.latLng)}w[A].apply(this,[C])})}})(this.map,s,u[p])}google.maps.event.addListener(s,"click",function(){this.details=o;if(w.click){w.click.apply(this,[this])}if(s.infoWindow){y.hideInfoWindows();s.infoWindow.open(y.map,s)}});google.maps.event.addListener(s,"rightclick",function(z){z.marker=this;if(w.rightclick){w.rightclick.apply(this,[z])}if(window.context_menu[y.el.id]["marker"]!=undefined){y.buildContextMenu("marker",z)}});if(s.fences){google.maps.event.addListener(s,"dragend",function(){y.checkMarkerGeofence(s,function(A,z){x(A,z)})})}return s};j.prototype.addMarker=function(o){var n;if(o.hasOwnProperty("gm_accessors_")){n=o}else{if((o.hasOwnProperty("lat")&&o.hasOwnProperty("lng"))||o.position){n=this.createMarker(o)}else{throw"No latitude or longitude defined."}}n.setMap(this.map);if(this.markerClusterer){this.markerClusterer.addMarker(n)}this.markers.push(n);j.fire("marker_added",n,this);return n};j.prototype.addMarkers=function(n){for(var o=0,p;p=n[o];o++){this.addMarker(p)}return this.markers};j.prototype.hideInfoWindows=function(){for(var n=0,o;o=this.markers[n];n++){if(o.infoWindow){o.infoWindow.close()}}};j.prototype.removeMarker=function(o){for(var n=0;n<this.markers.length;n++){if(this.markers[n]===o){this.markers[n].setMap(null);this.markers.splice(n,1);if(this.markerClusterer){this.markerClusterer.removeMarker(o)}j.fire("marker_removed",o,this);break}}return o};j.prototype.removeMarkers=function(n){var r=[];if(typeof n=="undefined"){for(var o=0;o<this.markers.length;o++){var q=this.markers[o];q.setMap(null);j.fire("marker_removed",q,this)}if(this.markerClusterer&&this.markerClusterer.clearMarkers){this.markerClusterer.clearMarkers()}this.markers=r}else{for(var o=0;o<n.length;o++){var p=this.markers.indexOf(n[o]);if(p>-1){var q=this.markers[p];q.setMap(null);if(this.markerClusterer){this.markerClusterer.removeMarker(q)}j.fire("marker_removed",q,this)}}for(var o=0;o<this.markers.length;o++){var q=this.markers[o];if(q.getMap()!=null){r.push(q)}}this.markers=r}};j.prototype.drawOverlay=function(o){var p=new google.maps.OverlayView(),n=true;p.setMap(this.map);if(o.auto_show!=null){n=o.auto_show}p.onAdd=function(){var q=document.createElement("div");q.style.borderStyle="none";q.style.borderWidth="0px";q.style.position="absolute";q.style.zIndex=100;q.innerHTML=o.content;p.el=q;if(!o.layer){o.layer="overlayLayer"}var t=this.getPanes(),s=t[o.layer],u=["contextmenu","DOMMouseScroll","dblclick","mousedown"];s.appendChild(q);for(var r=0;r<u.length;r++){(function(w,v){google.maps.event.addDomListener(w,v,function(x){if(navigator.userAgent.toLowerCase().indexOf("msie")!=-1&&document.all){x.cancelBubble=true;x.returnValue=false}else{x.stopPropagation()}})})(q,u[r])}if(o.click){t.overlayMouseTarget.appendChild(p.el);google.maps.event.addDomListener(p.el,"click",function(){o.click.apply(p,[p])})}google.maps.event.trigger(this,"ready")};p.draw=function(){var v=this.getProjection(),u=v.fromLatLngToDivPixel(new google.maps.LatLng(o.lat,o.lng));o.horizontalOffset=o.horizontalOffset||0;o.verticalOffset=o.verticalOffset||0;var t=p.el,q=t.children[0],r=q.clientHeight,s=q.clientWidth;switch(o.verticalAlign){case"top":t.style.top=(u.y-r+o.verticalOffset)+"px";break;default:case"middle":t.style.top=(u.y-(r/2)+o.verticalOffset)+"px";break;case"bottom":t.style.top=(u.y+o.verticalOffset)+"px";break}switch(o.horizontalAlign){case"left":t.style.left=(u.x-s+o.horizontalOffset)+"px";break;default:case"center":t.style.left=(u.x-(s/2)+o.horizontalOffset)+"px";break;case"right":t.style.left=(u.x+o.horizontalOffset)+"px";break}t.style.display=n?"block":"none";if(!n){o.show.apply(this,[t])}};p.onRemove=function(){var q=p.el;if(o.remove){o.remove.apply(this,[q])}else{p.el.parentNode.removeChild(p.el);p.el=null}};this.overlays.push(p);return p};j.prototype.removeOverlay=function(o){for(var n=0;n<this.overlays.length;n++){if(this.overlays[n]===o){this.overlays[n].setMap(null);this.overlays.splice(n,1);break}}};j.prototype.removeOverlays=function(){for(var n=0,o;o=this.overlays[n];n++){o.setMap(null)}this.overlays=[]};j.prototype.drawPolyline=function(q){var r=[],s=q.path;if(s.length){if(s[0][0]===undefined){r=s}else{for(var o=0,p;p=s[o];o++){r.push(new google.maps.LatLng(p[0],p[1]))}}}var v={map:this.map,path:r,strokeColor:q.strokeColor,strokeOpacity:q.strokeOpacity,strokeWeight:q.strokeWeight,geodesic:q.geodesic,clickable:true,editable:false,visible:true};if(q.hasOwnProperty("clickable")){v.clickable=q.clickable}if(q.hasOwnProperty("editable")){v.editable=q.editable}if(q.hasOwnProperty("icons")){v.icons=q.icons}if(q.hasOwnProperty("zIndex")){v.zIndex=q.zIndex}var t=new google.maps.Polyline(v);var u=["click","dblclick","mousedown","mousemove","mouseout","mouseover","mouseup","rightclick"];for(var n=0;n<u.length;n++){(function(x,w){if(q[w]){google.maps.event.addListener(x,w,function(y){q[w].apply(this,[y])})}})(t,u[n])}this.polylines.push(t);j.fire("polyline_added",t,this);return t};j.prototype.removePolyline=function(o){for(var n=0;n<this.polylines.length;n++){if(this.polylines[n]===o){this.polylines[n].setMap(null);this.polylines.splice(n,1);j.fire("polyline_removed",o,this);break}}};j.prototype.removePolylines=function(){for(var n=0,o;o=this.polylines[n];n++){o.setMap(null)}this.polylines=[]};j.prototype.drawCircle=function(o){o=f({map:this.map,center:new google.maps.LatLng(o.lat,o.lng)},o);delete o.lat;delete o.lng;var p=new google.maps.Circle(o),q=["click","dblclick","mousedown","mousemove","mouseout","mouseover","mouseup","rightclick"];for(var n=0;n<q.length;n++){(function(s,r){if(o[r]){google.maps.event.addListener(s,r,function(t){o[r].apply(this,[t])})}})(p,q[n])}this.polygons.push(p);return p};j.prototype.drawRectangle=function(p){p=f({map:this.map},p);var o=new google.maps.LatLngBounds(new google.maps.LatLng(p.bounds[0][0],p.bounds[0][1]),new google.maps.LatLng(p.bounds[1][0],p.bounds[1][1]));p.bounds=o;var q=new google.maps.Rectangle(p),r=["click","dblclick","mousedown","mousemove","mouseout","mouseover","mouseup","rightclick"];for(var n=0;n<r.length;n++){(function(t,s){if(p[s]){google.maps.event.addListener(t,s,function(u){p[s].apply(this,[u])})}})(q,r[n])}this.polygons.push(q);return q};j.prototype.drawPolygon=function(o){var r=false;if(o.hasOwnProperty("useGeoJSON")){r=o.useGeoJSON}delete o.useGeoJSON;o=f({map:this.map},o);if(r==false){o.paths=[o.paths.slice(0)]}if(o.paths.length>0){if(o.paths[0].length>0){o.paths=a(b(o.paths,c,r))}}var p=new google.maps.Polygon(o),q=["click","dblclick","mousedown","mousemove","mouseout","mouseover","mouseup","rightclick"];for(var n=0;n<q.length;n++){(function(t,s){if(o[s]){google.maps.event.addListener(t,s,function(u){o[s].apply(this,[u])})}})(p,q[n])}this.polygons.push(p);j.fire("polygon_added",p,this);return p};j.prototype.removePolygon=function(o){for(var n=0;n<this.polygons.length;n++){if(this.polygons[n]===o){this.polygons[n].setMap(null);this.polygons.splice(n,1);j.fire("polygon_removed",o,this);break}}};j.prototype.removePolygons=function(){for(var n=0,o;o=this.polygons[n];n++){o.setMap(null)}this.polygons=[]};j.prototype.getFromFusionTables=function(r){var o=r.events;delete r.events;var p=r,q=new google.maps.FusionTablesLayer(p);for(var n in o){(function(t,s){google.maps.event.addListener(t,s,function(u){o[s].apply(this,[u])})})(q,n)}this.layers.push(q);return q};j.prototype.loadFromFusionTables=function(o){var n=this.getFromFusionTables(o);n.setMap(this.map);return n};j.prototype.getFromKML=function(r){var s=r.url,o=r.events;delete r.url;delete r.events;var p=r,q=new google.maps.KmlLayer(s,p);for(var n in o){(function(u,t){google.maps.event.addListener(u,t,function(v){o[t].apply(this,[v])})})(q,n)}this.layers.push(q);return q};j.prototype.loadFromKML=function(o){var n=this.getFromKML(o);n.setMap(this.map);return n};j.prototype.addLayer=function(o,p){p=p||{};var n;switch(o){case"weather":this.singleLayers.weather=n=new google.maps.weather.WeatherLayer();break;case"clouds":this.singleLayers.clouds=n=new google.maps.weather.CloudLayer();break;case"traffic":this.singleLayers.traffic=n=new google.maps.TrafficLayer();break;case"transit":this.singleLayers.transit=n=new google.maps.TransitLayer();break;case"bicycling":this.singleLayers.bicycling=n=new google.maps.BicyclingLayer();break;case"panoramio":this.singleLayers.panoramio=n=new google.maps.panoramio.PanoramioLayer();n.setTag(p.filter);delete p.filter;if(p.click){google.maps.event.addListener(n,"click",function(s){p.click(s);delete p.click})}break;case"places":this.singleLayers.places=n=new google.maps.places.PlacesService(this.map);if(p.search||p.nearbySearch||p.radarSearch){var q={bounds:p.bounds||null,keyword:p.keyword||null,location:p.location||null,name:p.name||null,radius:p.radius||null,rankBy:p.rankBy||null,types:p.types||null};if(p.radarSearch){n.radarSearch(q,p.radarSearch)}if(p.search){n.search(q,p.search)}if(p.nearbySearch){n.nearbySearch(q,p.nearbySearch)}}if(p.textSearch){var r={bounds:p.bounds||null,location:p.location||null,query:p.query||null,radius:p.radius||null};n.textSearch(r,p.textSearch)}break}if(n!==undefined){if(typeof n.setOptions=="function"){n.setOptions(p)}if(typeof n.setMap=="function"){n.setMap(this.map)}return n}};j.prototype.removeLayer=function(o){if(typeof(o)=="string"&&this.singleLayers[o]!==undefined){this.singleLayers[o].setMap(null);delete this.singleLayers[o]}else{for(var n=0;n<this.layers.length;n++){if(this.layers[n]===o){this.layers[n].setMap(null);this.layers.splice(n,1);break}}}};var l,m;j.prototype.getRoutes=function(o){switch(o.travelMode){case"bicycling":l=google.maps.TravelMode.BICYCLING;break;case"transit":l=google.maps.TravelMode.TRANSIT;break;case"driving":l=google.maps.TravelMode.DRIVING;break;default:l=google.maps.TravelMode.WALKING;break}if(o.unitSystem==="imperial"){m=google.maps.UnitSystem.IMPERIAL}else{m=google.maps.UnitSystem.METRIC}var n={avoidHighways:false,avoidTolls:false,optimizeWaypoints:false,waypoints:[]},p=f(n,o);p.origin=/string/.test(typeof o.origin)?o.origin:new google.maps.LatLng(o.origin[0],o.origin[1]);p.destination=/string/.test(typeof o.destination)?o.destination:new google.maps.LatLng(o.destination[0],o.destination[1]);p.travelMode=l;p.unitSystem=m;delete p.callback;delete p.error;var r=this,q=[],s=new google.maps.DirectionsService();s.route(p,function(u,v){if(v===google.maps.DirectionsStatus.OK){for(var t in u.routes){if(u.routes.hasOwnProperty(t)){q.push(u.routes[t])}}if(o.callback){o.callback(q,u,v)}}else{if(o.error){o.error(u,v)}}})};j.prototype.removeRoutes=function(){this.routes.length=0};j.prototype.getElevations=function(o){o=f({locations:[],path:false,samples:256},o);if(o.locations.length>0){if(o.locations[0].length>0){o.locations=a(b([o.locations],c,false))}}var n=o.callback;delete o.callback;var q=new google.maps.ElevationService();if(!o.path){delete o.path;delete o.samples;q.getElevationForLocations(o,function(r,s){if(n&&typeof(n)==="function"){n(r,s)}})}else{var p={path:o.locations,samples:o.samples};q.getElevationAlongPath(p,function(r,s){if(n&&typeof(n)==="function"){n(r,s)}})}};j.prototype.cleanRoute=j.prototype.removePolylines;j.prototype.renderRoute=function(o,q){var r=this,p=((typeof q.panel==="string")?document.getElementById(q.panel.replace("#","")):q.panel),n;q.panel=p;q=f({map:this.map},q);n=new google.maps.DirectionsRenderer(q);this.getRoutes({origin:o.origin,destination:o.destination,travelMode:o.travelMode,waypoints:o.waypoints,unitSystem:o.unitSystem,error:o.error,avoidHighways:o.avoidHighways,avoidTolls:o.avoidTolls,optimizeWaypoints:o.optimizeWaypoints,callback:function(t,s,u){if(u===google.maps.DirectionsStatus.OK){n.setDirections(s)}}})};j.prototype.drawRoute=function(n){var o=this;this.getRoutes({origin:n.origin,destination:n.destination,travelMode:n.travelMode,waypoints:n.waypoints,unitSystem:n.unitSystem,error:n.error,avoidHighways:n.avoidHighways,avoidTolls:n.avoidTolls,optimizeWaypoints:n.optimizeWaypoints,callback:function(q){if(q.length>0){var p={path:q[q.length-1].overview_path,strokeColor:n.strokeColor,strokeOpacity:n.strokeOpacity,strokeWeight:n.strokeWeight};if(n.hasOwnProperty("icons")){p.icons=n.icons}o.drawPolyline(p);if(n.callback){n.callback(q[q.length-1])}}}})};j.prototype.travelRoute=function(o){if(o.origin&&o.destination){this.getRoutes({origin:o.origin,destination:o.destination,travelMode:o.travelMode,waypoints:o.waypoints,unitSystem:o.unitSystem,error:o.error,callback:function(r){if(r.length>0&&o.start){o.start(r[r.length-1])}if(r.length>0&&o.step){var t=r[r.length-1];if(t.legs.length>0){var v=t.legs[0].steps;for(var s=0,u;u=v[s];s++){u.step_number=s;o.step(u,(t.legs[0].steps.length-1))}}}if(r.length>0&&o.end){o.end(r[r.length-1])}}})}else{if(o.route){if(o.route.legs.length>0){var q=o.route.legs[0].steps;for(var n=0,p;p=q[n];n++){p.step_number=n;o.step(p)}}}}};j.prototype.drawSteppedRoute=function(o){var q=this;if(o.origin&&o.destination){this.getRoutes({origin:o.origin,destination:o.destination,travelMode:o.travelMode,waypoints:o.waypoints,error:o.error,callback:function(t){if(t.length>0&&o.start){o.start(t[t.length-1])}if(t.length>0&&o.step){var w=t[t.length-1];if(w.legs.length>0){var y=w.legs[0].steps;for(var u=0,x;x=y[u];u++){x.step_number=u;var v={path:x.path,strokeColor:o.strokeColor,strokeOpacity:o.strokeOpacity,strokeWeight:o.strokeWeight};if(o.hasOwnProperty("icons")){v.icons=o.icons}q.drawPolyline(v);o.step(x,(w.legs[0].steps.length-1))}}}if(t.length>0&&o.end){o.end(t[t.length-1])}}})}else{if(o.route){if(o.route.legs.length>0){var s=o.route.legs[0].steps;for(var n=0,r;r=s[n];n++){r.step_number=n;var p={path:r.path,strokeColor:o.strokeColor,strokeOpacity:o.strokeOpacity,strokeWeight:o.strokeWeight};if(o.hasOwnProperty("icons")){p.icons=o.icons}q.drawPolyline(p);o.step(r)}}}}};j.Route=function(n){this.origin=n.origin;this.destination=n.destination;this.waypoints=n.waypoints;this.map=n.map;this.route=n.route;this.step_count=0;this.steps=this.route.legs[0].steps;this.steps_length=this.steps.length;var o={path:new google.maps.MVCArray(),strokeColor:n.strokeColor,strokeOpacity:n.strokeOpacity,strokeWeight:n.strokeWeight};if(n.hasOwnProperty("icons")){o.icons=n.icons}this.polyline=this.map.drawPolyline(o).getPath()};j.Route.prototype.getRoute=function(n){var o=this;this.map.getRoutes({origin:this.origin,destination:this.destination,travelMode:n.travelMode,waypoints:this.waypoints||[],error:n.error,callback:function(){o.route=e[0];if(n.callback){n.callback.call(o)}}})};j.Route.prototype.back=function(){if(this.step_count>0){this.step_count--;var o=this.route.legs[0].steps[this.step_count].path;for(var n in o){if(o.hasOwnProperty(n)){this.polyline.pop()}}}};j.Route.prototype.forward=function(){if(this.step_count<this.steps_length){var o=this.route.legs[0].steps[this.step_count].path;for(var n in o){if(o.hasOwnProperty(n)){this.polyline.push(o[n])}}this.step_count++}};j.prototype.checkGeofence=function(o,p,n){return n.containsLatLng(new google.maps.LatLng(o,p))};j.prototype.checkMarkerGeofence=function(p,q){if(p.fences){for(var o=0,n;n=p.fences[o];o++){var r=p.getPosition();if(!this.checkGeofence(r.lat(),r.lng(),n)){q(p,n)}}}};j.prototype.toImage=function(o){var o=o||{},q={};q.size=o.size||[this.el.clientWidth,this.el.clientHeight];q.lat=this.getCenter().lat();q.lng=this.getCenter().lng();if(this.markers.length>0){q.markers=[];for(var n=0;n<this.markers.length;n++){q.markers.push({lat:this.markers[n].getPosition().lat(),lng:this.markers[n].getPosition().lng()})}}if(this.polylines.length>0){var p=this.polylines[0];q.polyline={};q.polyline["path"]=google.maps.geometry.encoding.encodePath(p.getPath());q.polyline["strokeColor"]=p.strokeColor;q.polyline["strokeOpacity"]=p.strokeOpacity;q.polyline["strokeWeight"]=p.strokeWeight}return j.staticMapURL(q)};j.staticMapURL=function(x){var A=[],o,J=(location.protocol==="file:"?"http:":location.protocol)+"//maps.googleapis.com/maps/api/staticmap";if(x.url){J=x.url;delete x.url}J+="?";var w=x.markers;delete x.markers;if(!w&&x.marker){w=[x.marker];delete x.marker}var L=x.styles;delete x.styles;var D=x.polyline;delete x.polyline;if(x.center){A.push("center="+x.center);delete x.center}else{if(x.address){A.push("center="+x.address);delete x.address}else{if(x.lat){A.push(["center=",x.lat,",",x.lng].join(""));delete x.lat;delete x.lng}else{if(x.visible){var M=encodeURI(x.visible.join("|"));A.push("visible="+M)}}}}var I=x.size;if(I){if(I.join){I=I.join("x")}delete x.size}else{I="630x300"}A.push("size="+I);if(!x.zoom&&x.zoom!==false){x.zoom=15}var H=x.hasOwnProperty("sensor")?!!x.sensor:true;delete x.sensor;A.push("sensor="+H);for(var z in x){if(x.hasOwnProperty(z)){A.push(z+"="+x[z])}}if(w){var v,u;for(var s=0;o=w[s];s++){v=[];if(o.size&&o.size!=="normal"){v.push("size:"+o.size);delete o.size}else{if(o.icon){v.push("icon:"+encodeURI(o.icon));delete o.icon}}if(o.color){v.push("color:"+o.color.replace("#","0x"));delete o.color}if(o.label){v.push("label:"+o.label[0].toUpperCase());delete o.label}u=(o.address?o.address:o.lat+","+o.lng);delete o.address;delete o.lat;delete o.lng;for(var z in o){if(o.hasOwnProperty(z)){v.push(z+":"+o[z])}}if(v.length||s===0){v.push(u);v=v.join("|");A.push("markers="+encodeURI(v))}else{v=A.pop()+encodeURI("|"+u);A.push(v)}}}if(L){for(var s=0;s<L.length;s++){var K=[];if(L[s].featureType){K.push("feature:"+L[s].featureType.toLowerCase())}if(L[s].elementType){K.push("element:"+L[s].elementType.toLowerCase())}for(var t=0;t<L[s].stylers.length;t++){for(var y in L[s].stylers[t]){var G=L[s].stylers[t][y];if(y=="hue"||y=="color"){G="0x"+G.substring(1)}K.push(y+":"+G)}}var F=K.join("|");if(F!=""){A.push("style="+F)}}}function B(p,N){if(p[0]==="#"){p=p.replace("#","0x");if(N){N=parseFloat(N);N=Math.min(1,Math.max(N,0));if(N===0){return"0x00000000"}N=(N*255).toString(16);if(N.length===1){N+=N}p=p.slice(0,8)+N}}return p}if(D){o=D;D=[];if(o.strokeWeight){D.push("weight:"+parseInt(o.strokeWeight,10))}if(o.strokeColor){var n=B(o.strokeColor,o.strokeOpacity);D.push("color:"+n)}if(o.fillColor){var r=B(o.fillColor,o.fillOpacity);D.push("fillcolor:"+r)}var C=o.path;if(C.join){for(var t=0,E;E=C[t];t++){D.push(E.join(","))}}else{D.push("enc:"+C)}D=D.join("|");A.push("path="+encodeURI(D))}var q=window.devicePixelRatio||1;A.push("scale="+q);A=A.join("&");return J+A};j.prototype.addMapType=function(o,p){if(p.hasOwnProperty("getTileUrl")&&typeof(p.getTileUrl)=="function"){p.tileSize=p.tileSize||new google.maps.Size(256,256);var n=new google.maps.ImageMapType(p);this.map.mapTypes.set(o,n)}else{throw"'getTileUrl' function required."}};j.prototype.addOverlayMapType=function(n){if(n.hasOwnProperty("getTile")&&typeof(n.getTile)=="function"){var o=n.index;delete n.index;this.map.overlayMapTypes.insertAt(o,n)}else{throw"'getTile' function required."}};j.prototype.removeOverlayMapType=function(n){this.map.overlayMapTypes.removeAt(n)};j.prototype.addStyle=function(n){var o=new google.maps.StyledMapType(n.styles,{name:n.styledMapName});this.map.mapTypes.set(n.mapTypeId,o)};j.prototype.setStyle=function(n){this.map.setMapTypeId(n)};j.prototype.createPanorama=function(n){if(!n.hasOwnProperty("lat")||!n.hasOwnProperty("lng")){n.lat=this.getCenter().lat();n.lng=this.getCenter().lng()}this.panorama=j.createPanorama(n);this.map.setStreetView(this.panorama);return this.panorama};j.createPanorama=function(p){var n=h(p.el,p.context);p.position=new google.maps.LatLng(p.lat,p.lng);delete p.el;delete p.context;delete p.lat;delete p.lng;var r=["closeclick","links_changed","pano_changed","position_changed","pov_changed","resize","visible_changed"],s=f({visible:true},p);for(var o=0;o<r.length;o++){delete s[r[o]]}var q=new google.maps.StreetViewPanorama(n,s);for(var o=0;o<r.length;o++){(function(u,t){if(p[t]){google.maps.event.addListener(u,t,function(){p[t].apply(this)})}})(q,r[o])}return q};j.prototype.on=function(n,o){return j.on(n,this,o)};j.prototype.off=function(n){j.off(n,this)};j.prototype.once=function(n,o){return j.once(n,this,o)};j.custom_events=["marker_added","marker_removed","polyline_added","polyline_removed","polygon_added","polygon_removed","geolocated","geolocation_failed"];j.on=function(n,p,o){if(j.custom_events.indexOf(n)==-1){if(p instanceof j){p=p.map}return google.maps.event.addListener(p,n,o)}else{var q={handler:o,eventName:n};p.registered_events[n]=p.registered_events[n]||[];p.registered_events[n].push(q);return q}};j.off=function(n,o){if(j.custom_events.indexOf(n)==-1){if(o instanceof j){o=o.map}google.maps.event.clearListeners(o,n)}else{o.registered_events[n]=[]}};j.once=function(n,p,o){if(j.custom_events.indexOf(n)==-1){if(p instanceof j){p=p.map}return google.maps.event.addListenerOnce(p,n,o)}};j.fire=function(n,q,r){if(j.custom_events.indexOf(n)==-1){google.maps.event.trigger(q,n,Array.prototype.slice.apply(arguments).slice(2))}else{if(n in r.registered_events){var o=r.registered_events[n];for(var p=0;p<o.length;p++){(function(s,u,t){s.apply(u,[t])})(o[p]["handler"],r,q)}}}};j.geolocate=function(o){var n=o.always||o.complete;if(navigator.geolocation){navigator.geolocation.getCurrentPosition(function(p){o.success(p);if(n){n()}},function(p){o.error(p);if(n){n()}},o.options)}else{o.not_supported();if(n){n()}}};j.geocode=function(o){this.geocoder=new google.maps.Geocoder();var n=o.callback;if(o.hasOwnProperty("lat")&&o.hasOwnProperty("lng")){o.latLng=new google.maps.LatLng(o.lat,o.lng)}delete o.lat;delete o.lng;delete o.callback;this.geocoder.geocode(o,function(p,q){n(p,q)})};if(typeof window.google==="object"&&window.google.maps){if(!google.maps.Polygon.prototype.getBounds){google.maps.Polygon.prototype.getBounds=function(q){var n=new google.maps.LatLngBounds();var t=this.getPaths();var s;for(var r=0;r<t.getLength();r++){s=t.getAt(r);for(var o=0;o<s.getLength();o++){n.extend(s.getAt(o))}}return n}}if(!google.maps.Polygon.prototype.containsLatLng){google.maps.Polygon.prototype.containsLatLng=function(s){var n=this.getBounds();if(n!==null&&!n.contains(s)){return false}var q=false;var t=this.getPaths().getLength();for(var v=0;v<t;v++){var w=this.getPaths().getAt(v);var u=w.getLength();var r=u-1;for(var o=0;o<u;o++){var x=w.getAt(o);var y=w.getAt(r);if(x.lng()<s.lng()&&y.lng()>=s.lng()||y.lng()<s.lng()&&x.lng()>=s.lng()){if(x.lat()+(s.lng()-x.lng())/(y.lng()-x.lng())*(y.lat()-x.lat())<s.lat()){q=!q}}r=o}}return q}}if(!google.maps.Circle.prototype.containsLatLng){google.maps.Circle.prototype.containsLatLng=function(n){if(google.maps.geometry){return google.maps.geometry.spherical.computeDistanceBetween(this.getCenter(),n)<=this.getRadius()}else{return true}}}google.maps.Rectangle.prototype.containsLatLng=function(n){return this.getBounds().contains(n)};google.maps.LatLngBounds.prototype.containsLatLng=function(n){return this.contains(n)};google.maps.Marker.prototype.setFences=function(n){this.fences=n};google.maps.Marker.prototype.addFence=function(n){this.fences.push(n)};google.maps.Marker.prototype.getId=function(){return this["__gm_id"]}}if(!Array.prototype.indexOf){Array.prototype.indexOf=function(r){if(this==null){throw new TypeError()}var s=Object(this);var p=s.length>>>0;if(p===0){return -1}var q=0;if(arguments.length>1){q=Number(arguments[1]);if(q!=q){q=0}else{if(q!=0&&q!=Infinity&&q!=-Infinity){q=(q>0||-1)*Math.floor(Math.abs(q))}}}if(q>=p){return -1}var o=q>=0?q:Math.max(p-Math.abs(q),0);for(;o<p;o++){if(o in s&&s[o]===r){return o}}return -1}}return j}));