/* Idle Timer - v1.0.0 - 2014-03-10
* https://github.com/thorst/jquery-idletimer
* Copyright (c) 2014 Paul Irish; Licensed MIT */
(function(a){a.idleTimer=function(d,c){var h;if(typeof d==="object"){h=d;d=null}else{if(typeof d==="number"){h={timeout:d};d=null}}c=c||document;h=a.extend({idle:false,timeout:30000,events:"mousemove keydown wheel DOMMouseScroll mousewheel mousedown touchstart touchmove MSPointerDown MSPointerMove"},h);var f=a(c),g=f.data("idleTimerObj")||{},m=function(n){var p=a.data(c,"idleTimerObj")||{};p.idle=!p.idle;p.olddate=+new Date();var o=a.Event((p.idle?"idle":"active")+".idleTimer");a(c).trigger(o,[c,a.extend({},p),n])},e=function(n){var p=a.data(c,"idleTimerObj")||{};if(p.remaining!=null){return}if(n.type==="mousemove"){if(n.pageX===p.pageX&&n.pageY===p.pageY){return}if(typeof n.pageX==="undefined"&&typeof n.pageY==="undefined"){return}var o=(+new Date())-p.olddate;if(o<200){return}}clearTimeout(p.tId);if(p.idle){m(n)}p.lastActive=+new Date();p.pageX=n.pageX;p.pageY=n.pageY;p.tId=setTimeout(m,p.timeout)},k=function(){var n=a.data(c,"idleTimerObj")||{};n.idle=n.idleBackup;n.olddate=+new Date();n.lastActive=n.olddate;n.remaining=null;clearTimeout(n.tId);if(!n.idle){n.tId=setTimeout(m,n.timeout)}},i=function(){var n=a.data(c,"idleTimerObj")||{};if(n.remaining!=null){return}n.remaining=n.timeout-((+new Date())-n.olddate);clearTimeout(n.tId)},l=function(){var n=a.data(c,"idleTimerObj")||{};if(n.remaining==null){return}if(!n.idle){n.tId=setTimeout(m,n.remaining)}n.remaining=null},b=function(){var n=a.data(c,"idleTimerObj")||{};clearTimeout(n.tId);f.removeData("idleTimerObj");f.off("._idleTimer")},j=function(){var n=a.data(c,"idleTimerObj")||{};if(n.idle){return 0}if(n.remaining!=null){return n.remaining}var o=n.timeout-((+new Date())-n.lastActive);if(o<0){o=0}return o};if(d===null&&typeof g.idle!=="undefined"){k();return f}else{if(d===null){}else{if(d!==null&&typeof g.idle==="undefined"){return false}else{if(d==="destroy"){b();return f}else{if(d==="pause"){i();return f}else{if(d==="resume"){l();return f}else{if(d==="reset"){k();return f}else{if(d==="getRemainingTime"){return j()}else{if(d==="getElapsedTime"){return(+new Date())-g.olddate}else{if(d==="getLastActiveTime"){return g.lastActive}else{if(d==="isIdle"){return g.idle}}}}}}}}}}}f.on(a.trim((h.events+" ").split(" ").join("._idleTimer ")),function(n){e(n)});g=a.extend({},{olddate:+new Date(),lastActive:+new Date(),idle:h.idle,idleBackup:h.idle,timeout:h.timeout,remaining:null,tId:null,pageX:null,pageY:null});if(!g.idle){g.tId=setTimeout(m,g.timeout)}a.data(c,"idleTimerObj",g);return f};a.fn.idleTimer=function(b){if(this[0]){return a.idleTimer(b,this[0])}return this}})(jQuery);